{"categories":[{"title":"Asynchronous Programming","uri":"https://kaka-lin.github.io/my-blog/categories/asynchronous-programming/"},{"title":"C++","uri":"https://kaka-lin.github.io/my-blog/categories/c++/"},{"title":"Data Science","uri":"https://kaka-lin.github.io/my-blog/categories/data-science/"},{"title":"Data Structure and Algorithm","uri":"https://kaka-lin.github.io/my-blog/categories/data-structure-and-algorithm/"},{"title":"Database","uri":"https://kaka-lin.github.io/my-blog/categories/database/"},{"title":"DevOps","uri":"https://kaka-lin.github.io/my-blog/categories/devops/"},{"title":"Go","uri":"https://kaka-lin.github.io/my-blog/categories/go/"},{"title":"OS","uri":"https://kaka-lin.github.io/my-blog/categories/os/"},{"title":"Python","uri":"https://kaka-lin.github.io/my-blog/categories/python/"},{"title":"Qt","uri":"https://kaka-lin.github.io/my-blog/categories/qt/"},{"title":"React","uri":"https://kaka-lin.github.io/my-blog/categories/react/"}],"posts":[{"content":"Python 負數取餘數 在 Python 中，取餘數的公式與其他語言一樣為:\nr = a - n * [a // n]\n其中 r 表示餘數，a 是被除數，n 是除數。\n在快上面公式前須先了解 // 在 Python 中的特性。\n如果已經熟悉可直接跳至 here\n除法 在 Python 中除法有兩種:\n真除法（true division): / 向下取整除法（floor division): // 真除法（true division): 運算子: /\n此為我們平常熟悉的算數的除法，它得到的是近似的浮點數(float)。\n10/2 # 5.0 12/10 # 1.2 -12/10 # -1.2 向下取整除法（floor division) 運算子: //\n向下取整除法，顧名思義為將除完後的結果執行 floor() 函式無條件捨去小數點。\n12//10 # 1, floor(1.2) = 1 -12//10 # -2, floor(-1.2) = -2 負數取餘數 餘數公式: r = a - n * [a // n]\n讓我們直接看範例:\n-123 % 10 = -123 - 10 * (-123 // 10) = -123 - 10 * (-13) = 7 -123/10 # 12.3 -123//10 # -13 -123%10 # 7 -1%10 # 9 ","id":0,"section":"posts","summary":"Python 負數取餘數 在 Python 中，取餘數的公式與其他語言一樣為: r = a - n * [a // n] 其中 r 表示餘數，a 是被除數，n 是除數。 在快上面公式前須先了解 // 在 Python 中的特","tags":["Python"],"title":"[Python] 負數取餘數","uri":"https://kaka-lin.github.io/my-blog/2022/06/the_mod_of_negative_number/","year":"2022"},{"content":"最近面試被問到多重繼承相關的問題，簡單做個紀錄～\nMultiple Inheritance (多重繼承) An object or class can inherit characteristics and features from more than one parent object or parent class.\nVirtual base classes Virtual base classes are used in virtual inheritance, is a way of preventing multiple \u0026quot;instance\u0026quot; of a given class appearing in an inheritance hierarchy when using multiple inheritance.\nExplain Consider the follow scenario:\nclass A { public: void func() {} }; class B : public A {}; class C : public A {}; class D : public B, public C {}; The above class hierarchy results in the \u0026quot;dreaded diamond\u0026quot; which looks like below:\nA / \\ B C \\ / D (D has now 2 A, B's A and C's A) Class A is inherited twice to class D. One is through class B and second is through class C.\nWhen you want to access any data or function of class A by class D, ambiguity arises as to which data or function should be called? One inherited through and the other inherited through C. This confuses compiler, as below:\nSolution Virtual inheritance is there to solve this problem. When a base class is specified as a virtual base, it can acts as an indirect base more than once without duplication of its data members. A single copy of its data members is shared by all the base classes that use virtual base.\nclass B : virtual public A {}; class C : virtual public A {}; This means that there is only \u0026quot;one instance\u0026quot; of A included in the hierarchy.\nExample #include \u0026lt;iostream\u0026gt; using namespace std; class A { public: virtual void func() { cout \u0026lt;\u0026lt; \u0026quot;function form A\u0026quot; \u0026lt;\u0026lt; endl; } }; class B : virtual public A {}; class C : virtual public A {}; class D : public B, public C { public: void func() { // use the func() of class A B::A::func(); } }; int main() { D d; d.func(); return 0; } Output\nfunction form A ","id":1,"section":"posts","summary":"最近面試被問到多重繼承相關的問題，簡單做個紀錄～ Multiple Inheritance (多重繼承) An object or class can inherit characteristics and features from more than one parent object or parent class. Virtual base classes Virtual base classes are used in virtual inheritance, is a way of preventing multiple \u0026quot;instance\u0026quot; of a","tags":["C++","OOP"],"title":"[C++] 多重繼承 (Multiple Inheritance)","uri":"https://kaka-lin.github.io/my-blog/2021/01/multiple_inheritance/","year":"2021"},{"content":"發現自己很容易搞混這兩個，於是簡單做個筆記記錄～\ni++ 與 ++i i++: post-increment\n在這一行程式完成之後，再進行+1的動作 ++i: pre-increment\n先進行+1，再進行後面的動作 Example int x; int y; // Pre-increment // x is incremented by 1, then y is assigned the value of x x = 1; y = ++x; // x is now 2, y is also 2 // Post-increment // y is assigned the value of x, then x is incremented by 1 x = 1; y = x++; // x is now 2, y is also 1 ","id":2,"section":"posts","summary":"發現自己很容易搞混這兩個，於是簡單做個筆記記錄～ i++ 與 ++i i++: post-increment 在這一行程式完成之後，再進行+1的動作 ++i: pre-increment 先進行+1，再進行後面的動作 Example int x; int y; //","tags":["C++"],"title":"[C++] i++ 與 ++i 的差別","uri":"https://kaka-lin.github.io/my-blog/2021/01/i-_and_-i/","year":"2021"},{"content":"前言 最近因為再研究labeling tool的關係，於是又重新把Qt的繪圖系統重新研究了一下\nQt\u0026rsquo;s Paint System Qt's paint system enables painting on screen and print devices using the same API, and is primarily based on the QPainter, QPaintDevice, and QPaintEngine classes. Qt的繪圖系統允許我們使用相同的API在螢幕或印表機(print device)上繪畫，並且主要是基於QPainter，QPainterDevice和QPaintEngine三個類。\nQPainter\n執行繪圖操作 (perform drawing operations)。\nQPaintDevice\n是一個二維空間的抽象，可以使用QPainter在上面進行繪製，也就是QPainter工作的空間。\nQPaintEngine\n提供了畫筆(painter)在不同設備進行繪製的統一的街口。\nQPaintEngine被QPainter和QPaintDevice內部使用，通常」通常對開發人員隱藏，除非你需要自定義一個設備，否則你不需要關心這個類。\n小結 我們可以把QPainter想成畫筆，把QPaintDevice想成使用畫筆的地方，比如紙張、螢幕等。而對於紙張、螢幕而言，肯定要使用不同的畫筆繪製，爲了統一使用一種畫筆，我們設計了QPaintEngine，這個類讓不同的紙張、螢幕都能使用一種畫筆來繪製。.\nExample 再進行更深的討論之前，我們先來看個簡單的範例\nsrc/draw_rect.py\nfrom PyQt5 import QtCore, QtGui, QtWidgets from PyQt5.QtCore import Qt from PyQt5.QtWidgets import QApplication, QMainWindow class MainWindow(QMainWindow): def __init__(self, parent=None): super(MainWindow, self).__init__(parent) self._setup_ui() def _setup_ui(self): self.setWindowTitle(\u0026quot;Drawing a Rectangle\u0026quot;) self.setMinimumSize(640, 480) def paintEvent(self, event): painter = QtGui.QPainter(self) painter.setPen(QtGui.QPen(Qt.red, 5, Qt.SolidLine)) painter.setBrush(QtGui.QBrush(Qt.green, Qt.DiagCrossPattern)) painter.drawRect(270, 190, 100, 100) 上面這個範例就是利用QPainter(畫筆)在QMainWindow(視窗)上畫一個矩形。下一章我們會詳細介紹。\n","id":3,"section":"posts","summary":"前言 最近因為再研究labeling tool的關係，於是又重新把Qt的繪圖系統重新研究了一下 Qt\u0026rsquo;s Paint System Qt's paint system enables painting on screen and print devices using the same API, and is primarily based on the QPainter, QPaintDevice,","tags":["Paint System"],"title":"[Qt] Qt's Paint System","uri":"https://kaka-lin.github.io/my-blog/2020/10/01_paint_system/","year":"2020"},{"content":"最近因為專案需要用到，於是又打開了兩年前在Udemy上買的React課程複習， 驚喜的發現講師有Update了2020版本上去，於是打算邊上課邊筆記記錄下來， 免得以後忘記又要重看一次。\n用 CodeSandBox 練習 第一章首先就是利用CodeSandBox(前端線上編輯器)帶你跑一個用React寫出來的簡單翻譯器，如下所示:\n以下附上練習及答案給大家參考。\nGenerating a React App 再來就是教你如何在你的電腦上生成一個React的Project。\n1. Install Node.js Ubuntu\n$ sudo apt update \u0026amp;\u0026amp; sudo apt install curl $ curl -sL https://deb.nodesource.com/setup_14.x | sudo -E bash - $ sudo apt install nodejs Mac\n$ brew install node 2. Create A React App We use Create React App to generate a react app.\n$ npx create-react-app \u0026lt;app name\u0026gt; $ cd \u0026lt;app name\u0026gt; 3. Start to write your app 使用create-react-app產生project後，我們可以將src裡面的檔案都刪掉，自己建新的index.js。也可以使用內建好的下去改，這邊刪掉是為了更好地理解react。\nBefore we start to write our app, we can delete all files in \u0026lt;app name\u0026gt;/src, and create a new index.js, App.js, and others files you need.\n$ rm -rf src/* $ touch src/index.js index.js 如下所示 // Import the React and ReactDOM libraries import React from 'react'; import ReactDOM from 'react-dom'; // Create a react component const App = () =\u0026gt; { return ( \u0026lt;div\u0026gt;Hello React\u0026lt;/div\u0026gt; ) } // Take the react component and show it on the screen ReactDOM.render( \u0026lt;App /\u0026gt;, document.querySelector('#root') ); document.querySelector('#root')\n其中的root是因為在index.html裡\u0026lt;body\u0026gt;的\u0026lt;div\u0026gt;的id是root，如下:\n\u0026lt;body\u0026gt; \u0026lt;noscript\u0026gt;You need to enable JavaScript to run this app.\u0026lt;/noscript\u0026gt; \u0026lt;div id=\u0026quot;root\u0026quot;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; 4. Run you app 最後就是啟動我們的app。\n$ npm start 結果如下所示：\n","id":4,"section":"posts","summary":"最近因為專案需要用到，於是又打開了兩年前在Udemy上買的React課程複習， 驚喜的發現講師有Update了2020版本上去，於是打算邊上課","tags":null,"title":"[React] 01 - Hello React","uri":"https://kaka-lin.github.io/my-blog/2020/09/01_hello_react/","year":"2020"},{"content":"JSX 介紹 首先看看下面這個變數宣告\nconst element = \u0026lt;h1\u0026gt;你好，世界！\u0026lt;/h1\u0026gt;; 這個有趣的標籤語法不是一個字串也不是HTML。\n這個語法叫做JSX，他是JavaScript的語法擴充。他是用來產生React 「element，雖然他看起跟一些樣板語言(HTML/XML)很像，但不一樣的是JSX允許你使用JavaScript的所有功能。\nBabel 但有些人可能還是會覺得這明明就是HTML啊，到底差在哪裡呢？ 在解釋前讓我們先來介紹Babel。\n由於每年都會推出新的ECMAScript規範，讓工程師在使用JavaScript開發時可以更方便更簡潔。但瀏覽器的瀏覽器的支援速度卻更不上ECMAScript的更新速度，所以新版的JavaScript在現有的瀏覽器上的支援度很低，目前市面上支援度最高的大概就是ES5了，為了可以使用新版的JavaScript開發又可以讓瀏覽器支援，於是有需要相應的工具將新版的JavaScript轉成ES5，這時候Babel就誕生了。\nBabel 就是用來將新版的JavaScript compile成ES5 JSX 與 Babel 因為JSX是JavaScript的語法擴充，所以Babel也可以編譯JSX。 讓我們看看\nJSX\nconst App = () =\u0026gt; { return \u0026lt;div\u0026gt;Hello React\u0026lt;/div\u0026gt;; } 編譯成\nconst App = () =\u0026gt; { return React.createElement( \u0026quot;div\u0026quot;, null, \u0026quot;Hello React\u0026quot;); } 從上我們可以發現，其實JSX單純只是React.createElement(component, props, ...children)的語法糖，他的好處是可以很直觀的用樣板語言來描述UI，同時也不用寫一堆雜亂又冗長的React.createElement()code。\nJSX 與 HTML 雖然 JSX 看起來與 HTML 很像，但他們之間還是有不一樣的地方:\n1. 標籤名稱: HTML使用lower case，ReactDOM使用lowerCamel HTML\n\u0026lt;div style=\u0026quot;background-color: red;\u0026quot;\u0026gt;\u0026lt;/div\u0026gt; JSX\n\u0026lt;div style={{ backgroundColor: 'red' }}\u0026gt;\u0026lt;/div\u0026gt; 2. JavaScript保留字: class, for在javaScript裡面都是保留字，所以改成className, htmlFor\nHTML\n\u0026lt;label class=\u0026quot;label\u0026quot; for=\u0026quot;name\u0026quot;\u0026gt;\u0026lt;/label\u0026gt; \u0026lt;input id=\u0026quot;name\u0026quot; type=\u0026quot;text\u0026quot; /\u0026gt; JSX\n\u0026lt;label className=\u0026quot;label\u0026quot; htmlFor=\u0026quot;name\u0026quot;\u0026gt;\u0026lt;/label\u0026gt; \u0026lt;input id=\u0026quot;name\u0026quot; type=\u0026quot;text\u0026quot; /\u0026gt; 3. 在 JSX 中嵌入 JavaScript Expression 你可以在 JSX 的大括號中寫入任何合法的 JavaScript expression。舉例來說，2 + 2、user.firstName 以及 formatName(user) 都是合法的 JavaScript expression。\nReference a JavaScript variable\nconst labelText = 'Enter name:'; \u0026lt;label className=\u0026quot;label\u0026quot; htmlFor=\u0026quot;name\u0026quot;\u0026gt; {labelText} \u0026lt;/label\u0026gt; Use JavaScript\u0026rsquo;s function\nfunction formatName() { return \u0026quot;Kaka Lin\u0026quot;; } const element = ( \u0026lt;h1\u0026gt; Hello, {formatName()}! \u0026lt;/h1\u0026gt; ); 4. Styling HTML\n\u0026lt;div style=\u0026quot;background-color: red;\u0026quot;\u0026gt;\u0026lt;/div\u0026gt; JSX\n\u0026lt;div style={{ backgroundColor: 'red' }}\u0026gt;\u0026lt;/div\u0026gt; 外層大括號: reference a JavaScript variable\n內層大括號: indicate a JavaScript object\n5. 在 JSX 中指定 Children 就像是在 XML 之中，如果一個標籤是空白的，你可以用 /\u0026gt; 立刻關閉這個標籤:\nconst element = \u0026lt;img src={user.avatarUrl} /\u0026gt;; JSX 標籤也可以包含 children:\nconst element = ( \u0026lt;div\u0026gt; \u0026lt;h1\u0026gt;Hello!\u0026lt;/h1\u0026gt; \u0026lt;h2\u0026gt;Good to see you here.\u0026lt;/h2\u0026gt; \u0026lt;/div\u0026gt; ); Example // Import the React and ReactDOM libraries import React from 'react'; import ReactDOM from 'react-dom'; // Create a react component const App = () =\u0026gt; { const buttonText = { text: 'Click me' }; const labelText = 'Enter name:'; return ( \u0026lt;div\u0026gt; \u0026lt;label className=\u0026quot;label\u0026quot; htmlFor=\u0026quot;name\u0026quot;\u0026gt; {labelText} \u0026lt;/label\u0026gt; \u0026lt;input id=\u0026quot;name\u0026quot; type=\u0026quot;text\u0026quot; /\u0026gt; \u0026lt;button style={{ backgroundColor: 'blue', color: 'white' }}\u0026gt; {buttonText.text} \u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; ); }; // Take the react component and show it on the screen ReactDOM.render(\u0026lt;App /\u0026gt;, document.querySelector('#root')); ","id":5,"section":"posts","summary":"JSX 介紹 首先看看下面這個變數宣告 const element = \u0026lt;h1\u0026gt;你好，世界！\u0026lt;/h1\u0026gt;; 這個有趣的標籤語法不是一個字串也不是HTML。 這","tags":null,"title":"[React] 02 - JSX 介紹","uri":"https://kaka-lin.github.io/my-blog/2020/09/02_hello_jsx/","year":"2020"},{"content":"Concurrency Go provides concurrency features as part of the core language.\nThis module goes over goroutines and channels, and how they are used to implement different concurrency patterns.\n複習: Concurrency and Parallelism\nGoroutines A goroutine is a lightweight thread managed by Go runtime.\ngoroutine是輕量級的執行緒(lightweight thread)， 可以想像建立 goroutine 就是建立了一個新的Thread Thread是屬於OS的。而Goroutine是屬於Go runtime的 Creating a Goroutine go f(x, y, z) Example func say(s string) { for i := 0; i \u0026lt; 5; i++ { time.Sleep(100 * time.Millisecond) fmt.Println(s) } } 1. Single Thread func main() { // single thread fmt.Println(\u0026quot;===== Single thread =====\u0026quot;) say(\u0026quot;world\u0026quot;) say(\u0026quot;hello\u0026quot;) } Output:\n===== Single thread ===== world world world world world hello hello hello hello hello 2. Goroutine: Multi Thread func main() { // multi thread: use goroutine fmt.Println(\u0026quot;===== Multi thread: use goroutine =====\u0026quot;) go say(\u0026quot;world\u0026quot;) say(\u0026quot;hello\u0026quot;) } Output:\n===== Multi thread: use goroutine ===== world hello hello world hello world hello world world hello Channels Channels are a typed conduit through which you can send and receive values with the channel operator, \u0026lt;-\nch \u0026lt;- v // Send v to channel ch. v := \u0026lt;-ch // Receive from ch, // and assign value to v Creating a Channels Like maps and slices, channels must be created before use:\nch := make(chan val_type) // buffered channels ch := make(chan val_type, capacity) capacity:\n容量(capacity)代表Channel可容納的元素的量，代表Channel的Buffer大小。\nChannels: Blocking By default or capacity is 0, sends and receives block until the other side is ready.\nSends to a buffered channel block only when the buffer is full\nChannel有Sender(寫入)和Receiver(讀取)。 如果Channel沒有設capacity或者capacity為0， 說明Channel沒有Buffer，此時只有當Sender和Receiver都ready時，訊息才會傳遞成功(Blocking)。 如果有設計Buffer，就不會Blocking，只有當Buffer滿的時候 才會發生Blocking。 This allows goroutines to synchronize without explicit locks ot condition variables.\nExample 1: would cause dead-lock 當執行到ch \u0026lt;- 1時，Sender會進入ready狀態， 然後就停住了，所以code不會執行到fmt.Println(\u0026lt;-ch)\nfunc main() { ch := make(chan int) ch \u0026lt;- 1 fmt.Println(\u0026lt;-ch) } Output:\nfatal error: all goroutines are asleep - deadlock! goroutine 1 [chan send]: main.main() /Users/kakalin/Projects/Notes/Go/08_concurrency/08_concurrency.go:28 +0x1a3 exit status 2 Solutions of Example 1 解法1: 建立goroutine去跑Sender/Receiver\nfunc main() { ch := make(chan int) // Sender (寫入) go func() { ch \u0026lt;- 1 }() // Receiver (讀取) val := \u0026lt;-ch fmt.Println(val) } 解法2: Buffered Channels\nfunc main() { ch := make(chan int, 1) ch \u0026lt;- 1 fmt.Println(\u0026lt;-ch) } Range and Close 就像 Map or Array，Channel可以通過for ... range來取得channel中的值，他會一直迭代直到channel被close。\n若不用channel時，可用close將channel關閉。\nA sender can close a channel to indicate that no more values will be sent.\nReceivers can test whether a channel has been closed by assigning a second parameter to the receive expression: after.\nNote:\nOnly the sender should close a channel.\nYou don\u0026rsquo;t usually need to close channels. Closing is only necessary when the receiver must be told there are no more values coming, such as to terminate a range loop.\nchannel關閉後: Sender: 繼續send資料給他會導致`panic: send on closed channel` Receiver: 可以繼續receive資料，且當超過send資料數量時，會讀取0值 func fibonacci(n int, c chan int) { x, y := 0, 1 for i := 0; i \u0026lt; n; i++ { c \u0026lt;- x x, y = y, x+y } close(c) } func main() { c := make(chan int, 10) go fibonacci(cap(c), c) for i := range c { fmt.Println(i) } } Select The select statement lets a goroutine wait on multiple communication operations.\nA select blocks until one of its cases can run, then it executes that case. It chooses one at random if multiple are ready.\nDefault Selection:\nThe default case in a select is run if no other case is ready.\n透過select，我們可以在多個channel中做選擇。 類似switch，但是但是只用來處理通訊操作(communication operations)。 Example 1 func fibonacci2(c, quit chan int) { x, y := 0, 1 for { select { case c \u0026lt;- x: x, y = y, x+y case \u0026lt;-quit: fmt.Println(\u0026quot;quit\u0026quot;) return } } } func main() { c := make(chan int) quit := make(chan int) go func() { for i := 0; i \u0026lt; 10; i++ { fmt.Println(\u0026lt;-c) } quit \u0026lt;- 0 }() fibonacci2(c, quit) } Output:\n0 1 1 2 3 5 8 13 21 34 quit Example 2 func main() { tick := time.Tick(100 * time.Millisecond) boom := time.After(500 * time.Millisecond) for { select { case \u0026lt;-tick: fmt.Println(\u0026quot;tick.\u0026quot;) case \u0026lt;-boom: fmt.Println(\u0026quot;BOOM!\u0026quot;) return default: fmt.Println(\u0026quot; .\u0026quot;) time.Sleep(50 * time.Millisecond) } } } Output:\n. . tick. . . tick. . . tick. . . tick. . . tick. BOOM! ","id":6,"section":"posts","summary":"Concurrency Go provides concurrency features as part of the core language. This module goes over goroutines and channels, and how they are used to implement different concurrency patterns. 複習: Concurrency and Parallelism Goroutines A goroutine is a lightweight thread managed by Go runtime. goroutine是輕量級的執行緒(lightwe","tags":null,"title":"[Go] Ch1: Go Basics - 08 Concurrency","uri":"https://kaka-lin.github.io/my-blog/2020/08/08_concurrency/","year":"2020"},{"content":"JupyterHub Use Docker to build a JupyterHub for multiple users\nNotices Before your start to build a JupyterHub with docker, please download the relative file at example.\nEnable HTTPS (SSL encryption) Generate a self-signed certificate with openssl, as below:\ncreate a self-signed certificate. For example, the following command will create a certificate valid for 365 days with both the key and certificate data written to the same file:\n$ openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout jupyterhub.key -out jupyterhub.pem Copy the certificate and key file to a director named secrets in the root directory.\n$ mkdir -p secrets $ cp jupyterhub.key jupyterhub.pem secrets/ Create a JupyterHub Data Volumn $ docker volume create --name jupyterhub-data Create a Docker Network $ docker network create jupyterhub-network DockerSpawner: Build the Jupyter Notebook Image $ make notebook_image Build the JupyterHub Image $ make build Run JupyterHub $ docker-compose up -d Stop JupyterHub $ docker-compose down Stops containers and remove volumes created by up.\n$ docker-compose down --volumes ","id":7,"section":"posts","summary":"JupyterHub Use Docker to build a JupyterHub for multiple users\nNotices Before your start to build a JupyterHub with docker, please download the relative file at example.\nEnable HTTPS (SSL encryption) Generate a self-signed certificate with openssl, as below:\ncreate a self-signed certificate. For example, the following command will create a certificate valid for 365 days with both the key and certificate data written to the same file:\n$ openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout jupyterhub.","tags":["JupyterHub"],"title":"[DS] Build JupyterHub with docker","uri":"https://kaka-lin.github.io/my-blog/2020/08/jupyterhub/","year":"2020"},{"content":"Generator functions allow you to declare a function that behaves like an iterator.\n在開始介紹Generator前，先讓我們來看看Iterator。\nIterator vs Iterable Iteration:\n當我們用一個循環(ex: for loop)遍歷一個容器(ex: list)裡面的所有元素時，就是迭代。\nExample:\nnums = [1,2,3,4] for num in nums: print(num) Iterable: An iterable is an object that you can get an iterator from.\n可執行Iteration的物件都稱為Iterable，就是可以被for loop遍歷的物件。\n在Python裡，只要在class裡實現了__iter__方法的物件都是Iterable物件。\n__iter__: return an iterator object (需透過iter()變成iterator物件) 如果只實現了__getitem__方法，可以夠過iter()變成iterator物件，但不是Iterable物件。\n__getitem__: can take sequential indexes starting from zero Iterator:\n根據Iterator Protocol， 只要是實現了__iter__和__next__方法，的物件皆為Iterator。其中:\n__iter__: 返回物件本身\n__next__: 返回容器的下一個值，在沒有後續元素時拋出StopIteration Error\nNote: Every iterator is also an iterable, but not every iterable is an iterator. list, dict, tuple, set, str都是Iterable，不是Iterator\n檢查物件是不是Iterator或Iterable 使用collections模組中的Iterable,Iterator去檢查\nfrom collections import Iterable, Iterator # list, dict, tuple, set, str都是Iterable，不是Iterator print(isinstance([], Iterable), isinstance([], Iterator)) # True False print(isinstance({}, Iterable), isinstance({}, Iterator)) # True False print(isinstance((), Iterable), isinstance((), Iterator)) # True False print(isinstance(set(), Iterable), isinstance(set(), Iterator)) # True False print(isinstance('', Iterable), isinstance('', Iterator)) # True False Output:\nTrue False True False True False True False True False Iterable to Iterator Created an iterator from an iterable by using the function iter().\nx = [1, 2, 3] print(isinstance(x, Iterable), isinstance(x, Iterator)) # True False # iter() iterator_x = iter(x) print(isinstance(iterator_x, Iterable), isinstance(iterator_x, Iterator)) # True True # use for loop or next() ''' for i in iterator_x: print(i) ''' print(next(iterator_x)) print(next(iterator_x)) print(next(iterator_x)) Output:\nTrue False True True 1 2 3 For loop and Iterable object 當一個Iterable物件要能夠在for loop中，必須call iter()， 使其轉成Iterator物件，如下圖所示:\n圖出處: Python進階技巧 (6)\nCreate an Iterable Object 有兩種方法:\nclass內實現__iter__方法 object.__iter__(self) class內實現__getitem__方法 object.__getitem__(self,key) For sequence type, the accepted keys should be integers and slice objects. Method 1: Using the __iter__ approach class MyIterator: def __init__(self, max_num): self.max_num = max_num def __iter__(self): \u0026quot;\u0026quot;\u0026quot;return an iterator object\u0026quot;\u0026quot;\u0026quot; return iter(self.max_num) itr = MyIterator(10) print(iter(itr)) Output:\n--------------------------------------------------------------------------- TypeError Traceback (most recent call last) \u0026lt;ipython-input-4-3e7d0d770d4d\u0026gt; in \u0026lt;module\u0026gt; 1 itr = MyIterator(10) ----\u0026gt; 2 print(iter(itr)) \u0026lt;ipython-input-3-2250d3b3d1b2\u0026gt; in __iter__(self) 5 def __iter__(self): 6 \u0026quot;\u0026quot;\u0026quot;return an iterator object\u0026quot;\u0026quot;\u0026quot; ----\u0026gt; 7 return iter(self.max_num) TypeError: 'int' object is not iterable 此時出現了錯誤，意思是MyIterator不能將\u0026quot;non-iterator type\u0026quot;轉成iter 這是因為我們class內成員(self.max_num)他是int type 不是iterable物件，所以我們只要將class成員改成iterable物件就可以了， 如下所示:\nclass MyIterator: def __init__(self, num_list): self.num_list = num_list def __iter__(self): \u0026quot;\u0026quot;\u0026quot;return an iterator object\u0026quot;\u0026quot;\u0026quot; return iter(self.num_list) _list = [1,2,3,4,5,6,7,8,9,10] itr = MyIterator(_list) print(\u0026quot;Is iterable object? {} \\nIs iterator object? {}\\n\u0026quot;.format( isinstance(itr, Iterable), isinstance(itr, Iterator))) # True False for i in itr: print(i, end=', ') Method 1: Using the __getitem__ approach class MyIterator: def __init__(self, num_list): self.num_list = num_list def __getitem__(self, key): if key \u0026lt; len(self.num_list): return self.num_list[key] else: raise IndexError _list = [1,2,3,4,5,6,7,8,9,10] itr = MyIterator(_list) print(\u0026quot;Is iterable object? {} \\nIs iterator object? {}\\n\u0026quot;.format( isinstance(itr, Iterable), isinstance(itr, Iterator))) # False False for i in itr: print(i, end=', ') Create an Iterator Object 物件內實現__iter__和__next__方法\nclass MyIterator: def __init__(self, max_num=20): self.max_num = max_num def __iter__(self): # Initialize: every time the iteration will start at 0 self.index = 0 return self def __next__(self): self.index += 1 if self.index \u0026lt;= self.max_num: return self.index else: raise StopIteration my_itr = MyIterator() print(\u0026quot;Is iterable object? {} \\nIs iterator object? {}\\n\u0026quot;.format( isinstance(itr, Iterable), isinstance(itr, Iterator))) # True True for i in my_itr: print(i, end=', ') Exercise: Fibonacci Iterator Fibonacci number 0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, ... class FibonacciIterator: def __init__(self, n=10): self.n = n def __iter__(self): self.a = 0 self.b = 1 self.start = True self.count = self.n return self def __next__(self): if self.start: self.start = False return self.a elif self.count: self.count -= 1 self.a, self.b = self.b, self.a + self.b return self.a else: raise StopIteration fib = FibonacciIterator() for i in fib: print(i, end=' ') Generator Generator使用方法跟Iterator一樣，每次迭代時會返回一個值，直到結束為止。 但相對Iterator，Generator更優雅更方便且功能更強大，算是一種特別的Iterator。\n建立Generator有兩種方法:\nFunction內包含至少一個以上的yield\n返回一個Generator object，需使用next()或是for loop取值\n使用Generator Expression(生成器表達式)\n只要把列表生成式的[]改成()\nCreate a Generator 1. 基於yield的生成器 改寫上面的FibonacciIterator\ndef fibonacci(n=10): index, a, b = 0, 0, 1 while index \u0026lt;= n: yield a a, b = b, a + b index += 1 fib = fibonacci() fib Output:\n\u0026lt;generator object fibonacci at 0x1096805d0\u0026gt; for x in fib: print(x, end=' ') Output:\n0 1 1 2 3 5 8 13 21 34 55 Generator Expression # List Comprehensions my_list = [x * x for x in range(10)] print(my_list) my_generator = (x * x for x in range(10)) my_generator Output:\n[0, 1, 4, 9, 16, 25, 36, 49, 64, 81] \u0026lt;generator object \u0026lt;genexpr\u0026gt; at 0x1097237d0\u0026gt; for x in my_generator: print(x, end=' ') Output:\n0 1 4 9 16 25 36 49 64 81 Generator vs Iterator In PEP 255, generator funtions are a special kind of function that return a lazey iterator. These are objects that you can loop over like a list. However, unlike list, lzay iterators do not store their contents in memory.\n不需要定義__iter__跟__next__，程式碼可讀性提高。\n節省記憶體空間。因為Generator實現了lazy evaluation，當真的需要某個值的時候才真的去計算。\n當我們需要讀取某個資料，但資料很大且一開始我們僅僅需要訪問前面幾個元素時， 如果這時我們建立一個list去存取它，不僅佔空間，且後面大多數元素佔的空間都白費了， 這時可以建立一個Generator，然後再迴圈的過程中不斷的推算出後面的元素， 這樣就可以節省大量空間。 \u0026gt;\u0026gt;\u0026gt; 一邊迴圈/迭代一邊計算取值 -\u0026gt; Generator 調用方可以透過send()傳值進入Generator內。\nExample: send() def gen(x, max=100): count = x while count\u0026lt;max: val = (yield count) if val is not None: count = val else: count += 1 f = gen(5) print(next(f)) print(next(f)) print(next(f)) print(\u0026quot;=\u0026quot; * 15) print(f.send(20)) for i in f: print(i, end=' ') Output:\n5 6 7 =============== 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 Reference Python進階技巧 (6) Python Iterators Python Generators iterator和generator雜談之二———懶惰的generator Python生成器（Generator）和yield用法詳解 How to Use Generators and yield in Python ","id":8,"section":"posts","summary":"Generator functions allow you to declare a function that behaves like an iterator. 在開始介紹Generator前，先讓我們來看看Iterator。 Iterator vs Iterable Iteration: 當我們用一個循環(ex: for loop)遍歷一","tags":["Coroutine","Generator"],"title":"[Python] Ch3: Coroutine - 01 Generator","uri":"https://kaka-lin.github.io/my-blog/2020/08/01_generator/","year":"2020"},{"content":"Methods and Interfaces Learn how to define methods on types, how to declare interfaces, and how to put everything together.\nMethods (方法) Go does not classes. However, you can define methods on types.\nA method is a function with a special receiver argument. The receiver appears in its own argument list between the func keword and the method name. Example The Abs() method has a receiver of type Vertex named v.\ntype Vertex struct { X, Y float64 } func (v Vertex) Abs() float64 { return math.Sqrt(v.X*v.X + v.Y*v.Y) } Method on Non-struct type type MyFloat float64 func (f MyFloat) Abs() float64 { if f \u0026lt; 0 { return float64(-f) } return float64(f) } Can only delcare a method with a receiver whose type is defined in the sampe packages as method. Pointer receivers Can declare methods with pointer receivers.\nThe receiver type has the literal syntax *T for some type T.\nMethods with pointer receivers can modify the value to which the receiver points. Since methods often need to modify their receiver, pointer receivers are more common than value receivers. func (v *Vertex) Scale(f float64) { v.X = v.X * f v.Y = v.Y * f } Choosing a value or pointer receiver 有兩種使用pointer receiver的優點:\n可以修改receiver指向的值 因為pointer是參考到同一個位址，所以可以避面在每次method call都複製一次值。這樣比較有效率，尤其當receiver是一個很大的資料結構時。 通常在給定的Type上都有value或pointer receiver。 但不能兩者混用。 Interfaces (介面) A Interface type is defined as a set of method signatures. 介面(Interface)就是只有宣告方法，但沒有實作的型別，如下所示:\ntype IVertex interface { X() float64 Y() float64 SetX(float64) SetY(float64) Abs() float64 } type Vertex struct { x float64 y float64 } Implement methods of an interface Interfaces are implemented implicitly\nThere is no explicit declaration of intent, no \u0026quot;implements\u0026quot; keyword. Implicit interface decouple the definition of an interface from its implementation, which could then appear in any package without prearrangement(預先安排). // 實作方法 func (v *Vertex) X() float64{ return v.x } func (v *Vertex) Y() float64{ return v.y } func (v *Vertex) SetX(x float64) { v.x = x } func (v *Vertex) SeYX(y float64) { v.y = y } func (v *Vertex) Abs() float64{ return math.Sqrt(v.x*v.x + v.y*v.y) } func main() { var p IPoint = \u0026amp;Point{3, 4} ... } Interface values An interface values consist of a tuple of value and concrete type.\n(value, type) 在fmt.Printf裡，我們可以用%v印出value以及使用T印出type\nfmt.Printf(\u0026quot;(%v, %T)\\n\u0026quot;, p, p) // (\u0026amp;{3 4}, *main.Point) The empty interface The interface type that specifies zero methods is known as the empty interface\ninterface{} An empty interface may hold values of any type.\nAre used by code that handles values of unknown type.\nExmaple:\nfmt.Print takes any number of arguments of type interface{}.\nfunc describw(i interface{}) { fmt.Printf(\u0026quot;(%v, %T)\\n\u0026quot;, i, i) } Type assertions A type assertion provide access to an interface value\u0026rsquo;s underlying concrete value`.\n有兩種形式:\nt := i.(T) // T is type that you want to access if i does not hold a T:\nThe statement will trigger a panic.\nt, ok := i.(T) if i holds a T:\nreturn underlying value, true\nif i does not hold a T:\nreturn zero, false (no panic)\nType switches switch v := i.(type) { case T: // here v has type T case S: // here v has type S default: // no match; here v hase type the same type as i } Example func do(i interface{}) { switch v := i.(type) { case int: fmt.Printf(\u0026quot;Twice %v is %v\\n\u0026quot;, v, v*2) case string: fmt.Println(\u0026quot;%q is %v bytes long\\n\u0026quot;, v, len(v)) default: fmt.Println(\u0026quot;I don't know about type %T\\n\u0026quot;, v) } } ","id":9,"section":"posts","summary":"Methods and Interfaces Learn how to define methods on types, how to declare interfaces, and how to put everything together. Methods (方法) Go does not classes. However, you can define methods on types. A method is a function with a special receiver argument. The receiver appears in its own argument list between the func keword and the method name. Example The Abs() method has a receiver of","tags":null,"title":"[Go] Ch1: Go Basics - 07 Methods and Interfaces","uri":"https://kaka-lin.github.io/my-blog/2020/08/07_methods_interfaces/","year":"2020"},{"content":"先來看一下Wiki上關於Coroutine的解釋:\nCoroutines are computer program components that generalize subroutines for non-preemptive multitasking (協同運作多工), by allowing execution to be suspended and resumed. 簡單來說，Coroutine就是一個可以暫時中斷(suspend)之後再繼續執性(resumed)的程序，並且可以多次的進行這樣的切換。如下圖所示\n圖出處: 淺談coroutine與gevent\nCoroutine 與 Process/Thread 說到這可能會有人問，他與Process/Thread差在哪？\n搶佔式多工(Preemptive multitasking )/協同式多工(Non-preemptive multitasking)\nThread: 搶佔式多工\n程式會\u0026quot;定期\u0026quot;放棄已佔有的執行資源，讓其他程式可以執行。 Coroutine: 協同式多工\n程式有各自的優先權，作業系統會去排成。 上下文切換(Context switch)\nProcess/Thread: 是透過OS/thread library來排程(Scheduling)決定是否進行上下文切換\nCoroutine: 由應用程式來做排程\nProcess/Thread: 執行結果不可預期 Coroutine: 執行結果可預期 Coroutine is Micro-Thread/Light-weight Thread\nCoroutine其實就是在單一Thread裡不同的Coroutine之間互相切換，本質上和Thread很像，所以也有些Coroutine叫做微執行緒(Micro-Thread)或是輕量化的執行緒(Light-weight Thread)。\n切換成本\nCoroutine之間切換的成本比Thread低。因為Coroutine的切換是由現在正在執行的Coroutine主動讓出執行權的(藉此可以達到並行(concurrency)運做)。\nCall Stack\n跟Process/Thread一樣，每個coroutine也有自己的call stack，由應用程式決定何時suspend/resumed。\nRace Conditions\n跟Process/Thread一樣，Coroutine也會有Race Conditions的問題。\nProcess/Thread適合CPU bound的程式，Coroutine適合I/O bound的程式。\nCoroutine 常見用例 狀態機(State machines) 生成器(Generators) Communicating sequential processes Actor model of concurrency Coroutine 與 Concurrency Concurrency (並行):\n同一時間能完成很多事情\nCoroutine (協程):\n可以中斷及繼續執行的程序，會主動讓執行權。\n藉由Coroutine的suspend/resumed特性，我們可以達到邏輯上的並行(Concurrency)。\n於是我們可以用Coroutine實現出Concurrency程式。 Concurrency的實現方法 除了用Coroutine實現Concurrency以外，我們也可以用以下方法來實現:\nMulti-threading Multi-processing Reference Wiki: Coroutine concurrency and coroutine 的目前了解 淺談coroutine與gevent Coroutine: 入門篇 Kotlin Coroutines: 入門概念 Coroutine vs Thread ","id":10,"section":"posts","summary":"先來看一下Wiki上關於Coroutine的解釋: Coroutines are computer program components that generalize subroutines for non-preemptive multitasking (協同運作多工), by allowing execution to be suspended and resumed. 簡單來說，Coroutine就是一","tags":["Coroutine"],"title":"[OS] Coroutine (協程)","uri":"https://kaka-lin.github.io/my-blog/2020/08/coroutine/","year":"2020"},{"content":"前言 最近在研究Asynchronous Model，上一篇介紹了同步、非同步、Blocking、Non-Blocking的觀念及Linux的I/O Model，本篇則要來介紹Concurrency與Parallelism，那就讓我們開始吧。\nConcurrency is not Parallelism \u0026quot;Concurrency is about dealing with lots of things at once. Parallelism is about doing lots of things at once\u0026quot;. - Rob Pike 上面這段話是Rob Pike(Golang的開發者之一)在2012年的一個talk時提出來的，他的標題就是Concurrency is not Parallelism (Slide)。\nConcurrency(並行): 在同一時間能完成很多事情 以做菜為例，就算只有一個廚師，他還是可以在同時間完成 切菜，準備醬料，主菜等等工作，他會在中間切換來切換去，而不會等到一盤菜好了，再去準備下一排菜。\nParallelism(平行): 同時間有很多Worker做差不多的事情 有兩個廚師分別做自己負責的菜。\n如下圖所示: 圖出處: Concurrency vs Parallelism\n更多例子 假設現在有兩個任務，\nConcurrency: 一個CPU中兩個任務交互執行\n圖出處: [Python] General concepts: concurrency, parallelism, threads and processes\nParallelism: 有兩個CPU，兩個任務個分配到其中之一同時執行\n圖出處: [Python] General concepts: concurrency, parallelism, threads and processes\nConcurrency vs Parallelism 圖出處: Concurrency is not Parallelism\nReference 淺談Asynchronous Programming Concurrency is not Parallelism [Python] General concepts: concurrency, parallelism, threads and processes Concurrency vs Parallelism ","id":11,"section":"posts","summary":"前言 最近在研究Asynchronous Model，上一篇介紹了同步、非同步、Blocking、Non-Blocking的觀念及Linux的I","tags":["Concurrency"],"title":"[OS] Concurrency(並行) 與 Parallelism(平行)","uri":"https://kaka-lin.github.io/my-blog/2020/07/concurrency_parallelism/","year":"2020"},{"content":"在開發I/O相關程式時常常會遇到以下這四種名詞:\n同步(Synchronous) 非同步(Asynchronous) 阻塞(Blocking) 非阻塞(Non-blocling) 由於常常會將其搞混，於是參考了經典著作UNIX Network Programming與網路上相關文章，整理成以下筆記，以方便自己日後複習。\n名詞解釋 阻塞(Blocking)與非阻塞(Non-blocking) 阻塞與非阻塞關注的是同一個執行緒發出請求(呼叫)時在等待結果時的狀態。\n阻塞: 調用方當發出請求後，在獲得結果之前，調用方會懸(Hang)住不動，無法回應，直到獲得結果。\n非阻塞: 調用方當發出請求後，調用方不會因為等待結果，而懸住不動(Hang住)。但後續通常透過輪詢(Polling)機制取得結果。\n同步(Synchronous)與非同步(Asynchronous) 同步與非同步關注的是執行緒之間的通訊模式。例如:使用者執行緒與Kernel之間的通訊模式。\n同步: 使用者執行緒發出 I/O 請求後，要等待結果返回。\n其中等待結果返回，有兩種方法:\n等待 Kernel 回覆: Blocking I/O 主動去問，輪詢(Pooling): Non-blocking I/O 執行緒發出請求後，需要等待或是主動詢問結果 -\u0026gt; 同步 非同步: 或稱異步。使用者執行緒發出 I/O 請求後，不需要等待直接返回，所以沒有返回結果。當Kernel I/O有結果後，會通知使用者執行緒或者呼叫callback函數。\n執行緒發出請求後，就不用管了，另一個執行緒自己會處理，等待處理好之後會通知使用者執行緒 -\u0026gt; 非同步 範例 當你要訂某家很夯的餐廳時，\n阻塞:\n在服務生沒跟你說結果時，你會暫停所有動作(懸住不動)，直到服務生你說有沒有訂位成功。 非阻塞:\n不管服務生有沒有跟你說，你自己先去做其他事情了，但你會可能半小時check一下結果。 同步:\n服務生跟你說，稍等一下，\u0026quot;我查一下\u0026quot;，等查好了告訴你結果(返回結果) 非同步:\n服務生跟你說，\u0026quot;我查好再打電話給你\u0026quot;，然後就掛電話了(直接返回，但沒有結果)。然後查好之後，他就主動打電話通知你(這邊服務生是透過\u0026quot;回電\u0026quot;這種callback方式來處理)。 I/O Models 下圖是 I/O Models的四個象限，我們用Linux上的相關API來介紹。\n圖出處: Study Notes - I/O Models\n從上圖我們可以得出四種 I/O model:\nBlocking I/O (BIO): Synchronous / Blocking Non-Blocking I/O (NIO): Synchronous / Non-Blocking I/O Multiplexing: Asynchronous / Blocking Asynchronous I/O (AIO): Asynchronous / Non-Blocking 對於一個 Network I/O 而言，基本上會涉及到兩個系統層面的對象：\n呼叫此I/O的Process/Thread 系統Kernel 以read()為例：\n等待資料準備好(Waiting for the data to be ready.) 把資料從Kernel copy到Process/thread中(Copying the data from the kernel to the process.) 1. Blocking I/O (BIO) 同步(Synchronous)/阻塞(Blocking) 如下圖所示，Blocking I/O在呼叫read()後，首先使用者執行緒自己被hang住，直到Kernel返回值之後才能繼續下一個動作。\n圖出處: IBM: Async I/O\nBlocking I/O 特性: 應用程序不會詢問資料是否準備好了，直到返回結果給應用程式。 2. Non-Blocking I/O (NIO) 同步(Synchronous)/非阻塞(Non-Blocking) 如下圖所示，Blocking I/O在呼叫read()後，會立即返回EAGIN or EWOULDBLOCK，就不用卡在那邊等待。\n站在使用者執行緒角度來看，當發現回傳的值是error時就知道資料還沒準備好，當kernel準備好資料，且又再次收到使用者call read()時，kernel就可以把資料copy到user process中，然後回傳結果。\n所以其實NIO就是不斷的去問kernel說資料好了沒，基本上就是用一個loop一直去call read()，這其實就是輪詢(polling)。\nNIO其實效率很差，很浪費CPU Time，但還算是蠻常見的。\n圖出處: IBM: Async I/O\nNon-Blocking I/O 特性: 應用程序會不斷的詢問資料是否準備好了。 3. I/O Multiplexing (多工 or 多路複用) 非同步(Asynchronous)/阻塞(Blocking) 所謂的I/O Multiplexing，其實就是select/poll/epoll，有些地方也稱這種I/O方式為event drive I/O。\n如下圖所示，以select為例，當程式呼叫了select時，整個process就會被block，同時kernel會去\u0026quot;監視\u0026quot;所有由select負責的檔案描述符(ex: socket)，一但有任一檔案描述符準備好了，select就會立刻return。此時在呼叫read將資料copy至application buffer中。\n圖出處: I/O Multiplexing\nI/O Multiplexing vs Blocking I/O 看起來 I/O Multiplexing 好像和 Blocking I/O 沒有太大不同，但事實上還是有差:\nI/O Multiplexing使用了兩次system call (select/read)，而Blocking I/O只需要一次system call (read)。\nI/O Multiplexing可同時處理多個connection，但Blocking I/O一次只能處理一個。\n如果I/O Multiplexing要處理的數量沒有很多的話，效能不一定比Blocking I/O的Multi-Thread好，甚至有可能有比較高的latency。\nI/O Multiplexing的優勢 不是對單個連接處理會更快，而是可以在只使用單個process/thread的情況下，監視/處理更多的connection。 4. Asynchronous I/O 非同步(Asynchronous)/非阻塞(Non-Blocking) 如下圖所示:\n應用程式告訴Kernel做一個操作(Operation)，不等Kernel回覆，程序繼續執行(這樣就不會讓user process產生block)。 Kernel完成整個操作(包含取得資料、複製到Buffer)之後，會向user process發送一個訊號，通知說這個讀取操作已完成，且這個訊號是由aio_read指定的(deliver signal specified in aio_read)。 圖出處: IBM: Async I/O\n生活中的I/O Model 以剛剛的訂某家很夯的餐廳為例，當你打去訂位時， Blocking代表你的狀態，Sync代表服務生的處理方式。\nBlocking I/O (BIO):\nBlocking: 你只能在電話那頭等待 Synchronous: 服務生查完之後，跟你說有沒有訂位成功 Non-Blocking I/O (NIO):\nNon-Blocking: 你可以繼續做其他事情，如跟朋友聊天 Synchronous: 但服務生不會主動通知你，你要主動去問有沒有訂位成功 I/O Multiplexing:\nBlocking: 你不能做其他事情，只能等待 Asynchronous: 服務生查完會主動打電話通知你 Asynchronous I/O (AIO):\nNon-Blocking: 你打完電話就繼續做其他事情 Asynchronous: 服務生查完會主動打電話通知你 程式範例 待更新～\nReference Study Notes - I/O Models\nIBM: Async I/O\n","id":12,"section":"posts","summary":"在開發I/O相關程式時常常會遇到以下這四種名詞: 同步(Synchronous) 非同步(Asynchronous) 阻塞(Blocking) 非阻","tags":["I/O Models"],"title":"[OS] I/O Models: 同步、非同步、阻塞、非阻塞","uri":"https://kaka-lin.github.io/my-blog/2020/07/io_models/","year":"2020"},{"content":"行程/處理程序(Process) 複習作業系統(Operating System)中的對於行程(Process)的解釋：\n行程(Process)是指已經執行並且load到記憶體中的程式(Program)， 行程中的每一行程式碼隨時都有可能被CPU執行。 現在面向執行緒設計的系統中，行程本身不是基本執行單位，而是執行緒的容器 行程需要一些資源才能完成工作，如CPU使用時間、記憶體、檔案及I/O裝置。 我們在電腦裡，點開應用程式就是將程式(Program)活化成行程/處理程序(Process)。\n每一個Process由下面兩項組成：\n一個Memory Space，用來進行變數的存取。\n不同Process的Memory Space也不同，所以彼此之間變數不能共享。\n一個以上的Thread(執行緒)\n1. CPU 與 Process 一個CPU一次只能執行一個Process，現在的電腦都是多核因此可同時執行數個Process。\n但CPU的總量總是少於Process的運行總量，且Procee會佔用記憶體，因此如何排程(Scheduling)， 如合有效的管理記憶體(Memory)就是作業系統(OS)在關注處理的事。\n2. Thread 與 Process Thread是OS能夠進行運算排成的最小單位，他被包含在Process之中，是Process中的實際運作單位。\nThread是OS分配CPU時間的對象 Process是OS分配資源的對象 總結 Process是電腦中已執行Program的實體，每一個Process互相獨立 Process需要一些資源才能完成工作，如CPU使用時間、記憶體、檔案及I/O裝置。 Process是基本執行單位Thread(執行緒)的容器 每一個Process由一個Memory Space和一個以上的Thread所組成 Python 模組: multiprocessing multiprocessing是Python的標準函式庫裡的模組，所以不需要另外安裝即可使用。\n行程/處理程序(Process): multiprocessing.Process Step 1. 建立行程/處理程序(Process) class multiprocessing.Process( group=None, target=None, name=None, args=(), kwargs={}, *, daemon=None) Step 2. 啟動(執行)Process Process.start() Step 3. 等待Process結束 Process.join([timeout] Example import time import multiprocessing def job(process_id): proc = multiprocessing.current_process() print(\u0026quot;Process_{}, Name: {}, PID: {}\u0026quot;.format(process_id, proc.name, proc.pid)) time.sleep(1) # 建立3個Process p_list = [] for i in range(3): p_list.append(multiprocessing.Process(target=job, args=(i,))) # 執行Process for p in p_list: p.start() # Main Process 繼續執行自己的工作 proc = multiprocessing.current_process() print(proc.name, proc.pid) # 等待所有Process執行結束 for p in p_list: p.join() print(\u0026quot;All Done.\u0026quot;) [Output]\nProcess_0, Name: Process-1, PID: 39377 Process_1, Name: Process-2, PID: 39378 Process_2, Name: Process-3, PID: 39379 MainProcess 39372 All Done. 物件導向 (Class) import time import multiprocessing class MyProcess(multiprocessing.Process): def __init__(self): super(MyProcess, self).__init__() def run(self): print(\u0026quot;{}, PID: {}\u0026quot;.format(self.name, self.pid)) time.sleep(1) # 建立3個Process p_list = [] for i in range(3): p_list.append(MyProcess()) # 執行Process for p in p_list: p.start() # Main Process 繼續執行自己的工作 proc = multiprocessing.current_process() print(\u0026quot;{}, PID: {}\u0026quot;.format(proc.name, proc.pid)) # 等待所有Process執行結束 for p in p_list: p.join() print(\u0026quot;All Done.\u0026quot;) [Output]\nMyProcess-4, PID: 39380 MyProcess-5, PID: 39381 MyProcess-6, PID: 39382 MainProcess, PID: 39372 All Done. 行程池(Process Pool): multiprocess.Pool 在實際處理問題的過程中，很忙的時候可能有大量的任務要執行，閒的時候可能只有零星任務要執行。 那在很忙的時候，我們就需要創建大量的Procee，首先創建跟銷毀都需要一定時間。 再來就算我們創建了大量的Process，作業系統也不會他們同時執行，這樣反而會影響效率。 此時就需要利用行程池。\n例如在進行系統管裡時，同時操控多個文件或是遠程控制多台主機，並行操作可以節省大量時間。 當操控的主機不多時，可以直接生成多個行程，但假設今天機台有上百台、上千台時， 手動去限制行程數量太麻煩，這時候就可以發揮Pool的功效。 Step 1. 建立Pool class multiprocessing.pool.Pool( [processes[, initializer[, initargs[, maxtasksperchild[, context]]]]]) processes: the number of worker process to use. If processes is None then the number returned by os.cpu_count() is used. Step 2. 執行\u0026amp;獲取返回值 Pool.map(func, iterable[, chunksize]) A parallel equivalent of the map() built-in function. It blocks until the result is ready. Note: Process與Pool最大的不同點就是：\nPool有返回值 Process無返回值 簡單範例 import os import multiprocessing def job(x): return x * x # 建立Pool, 並且設定Process數量 ''' cpu_count = os.cpu_count() # 4 pool = multiprocessing.Pool(processes=cpu_count) ''' pool = multiprocessing.Pool() # 用 map() 運行處理程序並捕獲結果 res = pool.map(job, range(10)) print(res) [Output]\n[0, 1, 4, 9, 16, 25, 36, 49, 64, 81] 同步(Sync) v.s. 非同步(Async) 在multiprocess.Pool的提供的方法裡我們可以發現， 每個方法都有另外一個尾巴加上_async的方法，如: map() \u0026amp; map_async()。\n那到底有_async跟沒有_async差在哪呢？ 現下我們先來介紹同步(sync)跟非同步(async)的概念！\n所謂的同步與非同步指的是執行緒(Thread)之間訊息通訊機制(溝通機制)的同步與否，如下所示：\n同步(synchronous communication):\n當一個要資料的Thread去跟一個負責給資料的Thread拿資料時，\n需要在那邊等待訊息回傳回來。\n在沒有得到結果前，該呼叫(call)就不會返回， 但是一但呼叫返回，就會得到返回值(return value)。 換句話說就是，呼叫者主動等待這個呼叫的結果。 非同步(asynchronous communication):\n當一個要資料的Thread去跟一個負責給資料的Thread拿資料時，\n不需要等待直接返回，等待訊息好的時候會自己通知要資料的Thread。\n在呼叫發出之後，這個呼叫(call function/API)會直接返回，所以沒有返回結果。 當被呼叫者準備好之後，被呼叫者通過狀態來通知呼叫者，或通過callback函數來處理。 Example: 當你打去某家餐廳要訂位時，\n同步:\n餐廳服務生說，您稍等一下，\u0026quot;我查一下\u0026quot;，等查好了告訴你結果(返回結果)。 非同步:\n餐廳服務生說，我查一下，\u0026quot;查好再打電話給你\u0026quot;，然後就掛電話了(不返回結果)， 然後查好之後，他會主動打電話給你(在這裡老闆透過\u0026quot;回電\u0026quot;這種callback方式來處理)。 pool.map() v.s. pool.map_async() map(func, iterable[, chuncksize]):\nA parallel equivalent of the `map()` built-in function. It blocks until the result is ready. map_async(func, iterable[, chuncksize[, callable[, error_callback]]]):\nA variant of the `map()` method which returns a result object. Note: 最後要寫close和join來避免主程序結束後，子程序被迫關閉。 1. pool.map() import os import time import multiprocessing def job(x): result = x * x print(\u0026quot;[In Pool]: {}\u0026quot;.format(result)) time.sleep(1) return result pool = multiprocessing.Pool(os.cpu_count()) pool_output = pool.map(job, range(10)) print(\u0026quot;將會阻塞直到子程序結束後才執行，返回值: {}\u0026quot;.format(pool_output)) # close 和 join 是確保主程序結束後，子程序仍然繼續執行 pool.close() pool.join() print(\u0026quot;Pool Done!!!\u0026quot;) [Output]\n[In Pool]: 1 [In Pool]: 4 [In Pool]: 0 [In Pool]: 9 [In Pool]: 16 [In Pool]: 25 [In Pool]: 36 [In Pool]: 49 [In Pool]: 81 [In Pool]: 64 將會阻塞直到子程序結束後才執行，返回值: [0, 1, 4, 9, 16, 25, 36, 49, 64, 81] Pool Done!!! 2. pool.map_async() import os import time import multiprocessing def job(x): result = x * x print(\u0026quot;[In Pool]: {}\u0026quot;.format(result)) time.sleep(1) return result pool = multiprocessing.Pool(os.cpu_count()) pool_output = pool.map_async(job, range(10)) print(\u0026quot;將不會阻塞和子程序並行\u0026quot;) print(\u0026quot;Main Process: {}\u0026quot;.format(pool_output.get())) # close 和 join 確保主程序結束後，子程序仍然繼續執行 pool.close() pool.join() print(\u0026quot;Pool Done!!!\u0026quot;) [Output]\n[In Pool]: 0 [In Pool]: 4 [In Pool]: 1 [In Pool]: 9 將不會阻塞和子程序並行 [In Pool]: 16 [In Pool]: 36 [In Pool]: 25 [In Pool]: 49 [In Pool]: 64 [In Pool]: 81 Main Process: [0, 1, 4, 9, 16, 25, 36, 49, 64, 81] Pool Done!!! pool.close() and pool.join() 如上範例所示，_async最後要寫close和join來避免主程序結束後，子程序被迫關閉。\nclose():\nPrevents any more tasks from being submitted to the pool. Once all the tasks have been completed the worker processes will exit. 停止接收新的任務，如果還有任務來，就會拋出異常 join():\nWait for the worker processes to exit. One must call close() or terminate() before using join(). 等待所有任務完成，必須在close或是terminate之後呼叫，否則會拋出異常 _async 取的回傳結果: multiprocess.pool.AsyncResult 如上範例所示，_async要取得回傳的資料需要使用get()方法\nclass multiprocess.pool.AsyncResult \u0026quot;\u0026quot;\u0026quot;The class of the result returned by Pool.apply_async() and Pool.map_async().\u0026quot;\u0026quot;\u0026quot; Method: get([timeout]):\nReturn the result when it arrives. wait([timeout]):\nWait until the result is avalibale or until timeout seconds pass. read():\nReturn whether the call has completed. successful():\nReturn whether the call completed without raising an exception. 待更新～\n","id":13,"section":"posts","summary":"行程/處理程序(Process) 複習作業系統(Operating System)中的對於行程(Process)的解釋： 行程(Process)是","tags":["Multi-Processing"],"title":"[Python] Ch2: Process Management - 02 Python 多行程/多處理程序(Multi-Processing)","uri":"https://kaka-lin.github.io/my-blog/2020/07/02_multiprocessing/","year":"2020"},{"content":"Function as Arguments In Go, function is also a type. So we can pass function as another function\u0026rsquo;s parameters.\n當我們將function當成參數使用時，必須在參數列表列出funtion本身的參數type與及其所需的回傳type, 如:\nfunc(int, int) int Example 1 func print(fn func(int, int) int, a, b int) { fmt.Println(fn(a, b)) } func area(a, b int) int { return a * b } func sum(a, b int) int { return a + b } func main() { print(area, 3, 4) // 12 print(sum, 3, 4) // 7 } Example 2 func compute(fn func(float64, float64) float64) float64 { return fn(3, 4) } func hypot(x, y float64) float64 { return math.Sqrt(x*x + y*y) } func main() { fmt.Println(compute(hypot)) // 5 } Function Closures Golang supports anonymous functions(匿名函式) which can form closures(閉包). Anonymous functions are useful when you want to define a function inline without having to name it.\nAnonymous Function 所謂的匿名函式就是沒有名字的函式 匿名函式可以作為返回值 匿名函式也可以作為變數 Example // anonymous function func(x, y int) int { return x + y } // anonymous function as a return value func printSum() func(int, int) { return func(x, y int) { fmt.Println(x + y) } } // anonymous function as a variable f := func(x, y int) int { return x + y } Python\u0026rsquo;s lambda # anonymous function lambda x, y: x + y f = lambda x, y: x + y Closure A closure is a function value that references variables from outside its body\n閉包就是能夠讀取其他函式內部變量的函式。好處是可以把變數隱藏在內部，讓外部存取不到，只能看到我們想要提供的值 Example 1 func intSeq() func() int { i := 0 return func() int { i += 1 return i } } func main() { nextInt := intSeq() fmt.Println(nextInt()) // 1 fmt.Println(nextInt()) // 2 fmt.Println(nextInt()) // 3 } 上例將變數i隱藏在內部匿名函式中，我們無法對變數i進行操作，只能拿到他的值。\nExample 2 func adder() func(int) int { sum := 0 return func(x int) int { sum += x return sum } } Closure in Python def printMessage(): string = \u0026quot;This is closure\u0026quot; def print_msg(): print(string) return print_msg Exercise: Fibonacci closure // fibonacci is a function that returns // a function that return an int. func fibonacci() func() int { a, b := 0, 1 return func() int { v := a a, b = b, a+b return v } } ","id":14,"section":"posts","summary":"Function as Arguments In Go, function is also a type. So we can pass function as another function\u0026rsquo;s parameters. 當我們將function當成參數使用時，必須在參數列表列出funtion本身的參數type與及其所需的","tags":null,"title":"[Go] Ch1: Go Basics - 06 Advanced Function","uri":"https://kaka-lin.github.io/my-blog/2020/07/06_advanced_function/","year":"2020"},{"content":"執行緒(Thread) 複習作業系統(Operating System)中的對於執行緒(thread)的解釋：\n執行緒(thread)是OS能夠進行運算排程的最小單位，被包含在程序(Process)之中，是Process中的實際運算單位。 同一顆CPU執行 同一個Process下的Thread共享資源，如記憶體、全域變數等 一個執行緒被中斷會導致集體死亡 Python 模組: threading threading是Python的標準函式庫裡的模組，所以不需要另外安裝即可使用，雖然功能沒有很多，但已經足夠我們用來設計基本的多執行緒程式。\n執行緒(Thread): threading.Thread Step 1. 建立子執行緒與執行 class threading.Thread( group=None, target=None, name=None, args=(), kwargs={}, *, daemon=None) group: should be None; reserved for future extension when a ThreadGroup class is implemented. target: the callable object to be invoked by the run() method. name: the thread name. args: the argument tuple for the target invocation. Defaults to (). kwargs: a dictionary of keyword arguments for the target invocation. Defaults to {}. Step 2. 執行子執行緒 Thread.start() Step 3. 等待子執行緒結束 Thread.join(timeout=None) Wait until the thread terminates. When the timeout argument is present and not `None`, it should be a floating point number specifying a timeout for the operation in second Example import time import threading def job(): for i in range(5): print(\u0026quot;Child Thread: {}\u0026quot;.format(i)) time.sleep(1) # 建立子執行緒 t = threading.Thread(target=job) # 子執行緒開始執行 t.start() # Main Thread繼續執行自己的工作 for i in range(3): print(\u0026quot;Main thread: {}\u0026quot;.format(i)) time.sleep(1) # 等待子執行緒執行結束 t.join() print(\u0026quot;All Done.\u0026quot;) [Output]\nChild Thread: 0Main thread: 0 Child Thread: 1Main thread: 1 Child Thread: 2Main thread: 2 Child Thread: 3 Child Thread: 4 All Done. 這裡的主程式會在join的地方等待到子執行緒t結束後，才會繼續往下執行。\n建立多個子執行緒與參數 import time import threading def job2(num): print(\u0026quot;Thread: {}\u0026quot;.format(num)) time.sleep(1) # 建立5個子執行緒 threads = [] for i in range(5): threads.append(threading.Thread(target=job2, args=(i,))) # 執行剛剛建立的子執行緒 threads[i].start() # Main Thread繼續執行自己的工作 for i in range(3): print(\u0026quot;Main thread: {}\u0026quot;.format(i)) time.sleep(1) # 等待所有子執行緒執行結束 for i in range(5): threads[i].join() print(\u0026quot;All Done.\u0026quot;) [Output]\nThread: 0 Thread: 1 Thread: 2 Thread: 3 Thread: 4 Main thread: 0 Main thread: 1 Main thread: 2 All Done. 物件導向 (Class) 將Thread變成一個Class，需要覆寫run()\nThread.run() Method representing the thread’s activity.\nYou may override this method in a subclass\nExample import time import threading import random class Counter(threading.Thread): def __init__(self, thread_name): super(Counter, self).__init__(name=thread_name) def run(self): '''重寫父類run方法，在執行緒啟動後執行該方法內的程式''' count = 0 for i in range(1000): count = count + 1 print(\u0026quot;{}, count: {}\u0026quot;.format(self.name, count)) # 建立5個子行緒 threads = [] for i in range(5): threads.append(Counter('thread_' + str(i))) threads[i].start() # Main Thread繼續執行自己的工作 for i in range(3): print(\u0026quot;Main thread: {}\u0026quot;.format(i)) time.sleep(1) # 等待所有子執行緒執行結束 for i in range(5): threads[i].join() print(\u0026quot;All Done.\u0026quot;) [Output]\nthread_0, count: 1000 thread_1, count: 1000 thread_2, count: 1000 thread_3, count: 1000thread_4, count: 1000 Main thread: 0 Main thread: 1 Main thread: 2 All Done. 鎖(Lock) 為了避免多個執行緒同時對同一個記憶體做存取（例如：將資料寫入同一個檔案），必須使用Lock將那個記憶體區段鎖起來，以確保一次只有一個執行緒可以去存取記憶體裡的資料。\n我們可以使用threading模組裡的Lock()來處理。\nclass threading.Lock() 利用Thread.Lock()來建構互斥鎖(Mutex)\n1. 取得Lock ```python Lock.acquire(blocking=True, timeout=-1) ``` Acquire a lock, `blocking` or `non-blocking` 2. 釋放Lock ```python Lock.release() ``` Release a lock. This can be called from any thread, not only the thread which has acquired the lock. Example 不使用 Lock import time import threading import random count = 0 class Counter(threading.Thread): def __init__(self, thread_name): super(Counter, self).__init__(name=thread_name) def run(self): global count for i in range(1000): count += 1 print(\u0026quot;{}, count: {}\u0026quot;.format(self.name, count)) # 建立5個子行緒 threads = [] for i in range(5): threads.append(Counter('thread_' + str(i))) threads[i].start() # Main Thread繼續執行自己的工作 for i in range(3): print(\u0026quot;Main thread: {}\u0026quot;.format(i)) time.sleep(1) # 等待所有子執行緒執行結束 for i in range(5): threads[i].join() print(\u0026quot;Final Count: {}\u0026quot;.format(count)) print(\u0026quot;All Done.\u0026quot;) [Output]\nthread_0, count: 1000 thread_1, count: 2000 thread_2, count: 3000 thread_3, count: 4000thread_4, count: 5000 Main thread: 0 Main thread: 1 Main thread: 2 Final Count: 5000 All Done. 由上輸出可已看到，Output很亂。\n使用 Lock import time import threading import random count = 0 class Counter(threading.Thread): def __init__(self, lock, thread_name): super(Counter, self).__init__(name=thread_name) self.lock = lock def run(self): global count # 取得 lock self.lock.acquire() print(\u0026quot;Lock acquire by {}\u0026quot;.format(self.name)) for i in range(10000): count += 1 # 不能讓多個執行續同時進行的工作 print(\u0026quot;{}, count: {}\u0026quot;.format(self.name, count)) time.sleep(1) # 釋放 lock print(\u0026quot;Lock released by {}\u0026quot;.format(self.name)) self.lock.release() # 建立 lock lock = threading.Lock() # 建立5個子行緒 threads = [] for i in range(5): threads.append(Counter(lock, 'thread_' + str(i))) threads[i].start() # Main Thread繼續執行自己的工作 for i in range(3): print(\u0026quot;Main thread: {}\u0026quot;.format(i)) time.sleep(1) # 等待所有子執行緒執行結束 for i in range(5): threads[i].join() print(\u0026quot;Final Count: {}\u0026quot;.format(count)) print(\u0026quot;All Done.\u0026quot;) [Output]\nLock acquire by thread_0 thread_0, count: 10000 Main thread: 0 Lock released by thread_0 Lock acquire by thread_1Main thread: 1 thread_1, count: 20000 Main thread: 2 Lock released by thread_1 Lock acquire by thread_2 thread_2, count: 30000 Lock released by thread_2 Lock acquire by thread_3 thread_3, count: 40000 Lock released by thread_3 Lock acquire by thread_4 thread_4, count: 50000 Lock released by thread_4 Final Count: 50000 All Done. 從結果可以看出，執行緒是一個接著一個執行\n旗標(Semaphore) class threading.Semaphore([value]) 因為系統資源有限，所以在處理某些耗資源的工作時，會允許有限的執行緒同時進行，跟鎖(Lock)類似 但是Lock僅允許一次一個執行緒，而旗標(Semaphore)允許多個執行緒，但要限制同時執行的執行緒上限。\nSemaphore是進入與出去某個Code block的門鎖, 而這把門鎖會記錄多少個Thread進入到控制的Code block 以確保該Code block最多只能被n個Thread同時執行。\nSemaphore物件上面只有兩個方法:\nacquire([blocking]) release() 另外在取得Semaphore物件的時候你可以透過參數value指定Code block最多只能有多少個Thread同時進入該Code block(即是所謂的Critical Section).\n可以簡單地把Semaphore想像為計數器：\n當一個執行緒呼叫了acquire()時，旗標內部計數器就減1 當一個執行緒呼叫了release()時，旗標內部計數器就加1 當計數器為0時，之後的執行緒就要等待其他執行緒release後，才能繼續 Example import threading import time import random count = 0 lock = threading.Lock() semphore = threading.Semaphore(2) def code_block(thd, i): global count, lock lock.acquire() count += 1 print(\u0026quot;{} (+1), count: {}\u0026quot;.format(thd.name, count)) lock.release() time.sleep(random.randrange(2, 10)) lock.acquire() count -= 1 print(\u0026quot;{} (-1), count: {}\u0026quot;.format(thd.name, count)) lock.release() class Guest(threading.Thread): def __init__(self, semphore, thread_name): super(Guest, self).__init__(name=thread_name) self.semphore = semphore def run(self): # 取得旗標 # acquire一次，semaphore就會減1，直到數量為0時，就會阻塞這在 self.semphore.acquire() print(\u0026quot;Semphore acquired by {}\u0026quot;.format(self.name)) # 僅允許有限個執行緒同時進的工作 code_block(self, i) time.sleep(1) # 釋放旗標 # release一次，semaphore就會加1 print(\u0026quot;Semphore released by {}\u0026quot;.format(self.name)) self.semphore.release() # 建立3個子行緒 threads = [] for i in range(3): threads.append( Guest(semphore, 'thread_' + str(i))) threads[i].start() # 等待所有子執行緒執行結束 for i in range(3): threads[i].join() print(\u0026quot;Final Count: {}\u0026quot;.format(count)) # should be 0 print(\u0026quot;All Done.\u0026quot;) [Output]\nSemphore acquired by thread_0Semphore acquired by thread_1 thread_0 (+1), count: 1 thread_1 (+1), count: 2 thread_1 (-1), count: 1 Semphore released by thread_1 Semphore acquired by thread_2 thread_2 (+1), count: 2 thread_0 (-1), count: 1 Semphore released by thread_0 thread_2 (-1), count: 0 Semphore released by thread_2 Final Count: 0 All Done. 事件(Event) This is one of the simplest mechanisms for communication between threads: one thread signals an event and other threads wait for it.\nclass threading.Event() 用於Thread之間的溝通，應用方式通常為ㄧ個thread發起一個event，然後其他thread會等待發出event的thread才開始做相信動作。\nEvent透過維護內部的flag符來實現thread之間的同步問題， 維護flag的狀態有三種方法(wait, set, clear)\nevent.wait(): 使執行緒組塞，直到flag值為True，初始值為Flase event.set(): 通知相對應的執行緒作相應動作，將flag值設為True envet.clear(): 做完相對應動作後，再次等待下次通知，將flag值設為False Example 1 import time import threading class TestThread(threading.Thread): def __init__(self, name, event): super(TestThread, self).__init__() self.name = name self.event = event def run(self): print(\u0026quot;\\tThread: {} wait!\u0026quot;.format(self.name)) self.event.wait() print(\u0026quot;\\tThread: {} start!\u0026quot;.format(self.name)) def run(): event = threading.Event() threads = [] for i in range(1, 5): threads.append(TestThread(str(i), event)) print(\u0026quot;Main thread start!\u0026quot;) for thread in threads: thread.start() print(\u0026quot;\\n--------------------\u0026quot;) print(\u0026quot;Sleep 3 seconds!\u0026quot;) time.sleep(3) print(\u0026quot;Now awake other threads !\u0026quot;) event.set() run() [Output]\nMain thread start! Thread: 1 wait! Thread: 2 wait! Thread: 3 wait! Thread: 4 wait! -------------------- Sleep 3 seconds! Now awake other threads ! Thread: 2 start!\tThread: 4 start! Thread: 3 start! Thread: 1 start! Example 2: 十字路口 import time import random import threading class VehicleThread(threading.Thread): ''' Class representing a motor vehicle at an intersection ''' def __init__(self, thread_name, event): super(VehicleThread, self).__init__(name=thread_name) self.event = event def run(self): ''' Vehicle waits unless/until light is green ''' # Staggered arrival times time.sleep(random.randrange(1, 10)) # prints arrival time of car at intersection print(\u0026quot;{} arrived {}\u0026quot;.format( self.getName(), time.strftime(\u0026quot;%Y-%m-%d %H:%M:%S\u0026quot;, time.localtime()))) # wait for green light self.event.wait() # displays time that car departs intersection print(\u0026quot;{} passes through the intersection at {}\u0026quot;.format( self.getName(), time.strftime(\u0026quot;%Y-%m-%d %H:%M:%S\u0026quot;, time.localtime()))) def run(): green_light = threading.Event() # creates and starts ten vehicle threads vehicle_threads = [] for i in range(1, 11): vehicle_threads.append(VehicleThread('Vehicle ' + str(i), green_light)) print(\u0026quot;----------------- Start: {}\u0026quot;.format( time.strftime(\u0026quot;%Y-%m-%d %H:%M:%S\u0026quot;, time.localtime()))) for vehicle in vehicle_threads: vehicle.start() # Run in jupyter notebook, default thread is: 5 while threading.active_count() \u0026gt; 5: # sets the Event's flag to false -- block all incoming vehicles green_light.clear() print(\u0026quot;RED LIGHT! at: {}\u0026quot;.format( time.strftime(\u0026quot;%Y-%m-%d %H:%M:%S\u0026quot;, time.localtime()))) time.sleep(3) print(\u0026quot;----------------- 3 second -----------------\u0026quot;) # sets the Event's flag to true -- awake all waiting vehicles green_light.set() time.sleep(1) print(\u0026quot;----------------- End: {}\u0026quot;.format( time.strftime(\u0026quot;%Y-%m-%d %H:%M:%S\u0026quot;, time.localtime()))) run() [Output]\n----------------- Start: 2020-07-15 17:51:40 RED LIGHT! at: 2020-07-15 17:51:40 Vehicle 1 arrived 2020-07-15 17:51:41 Vehicle 4 arrived 2020-07-15 17:51:41 Vehicle 2 arrived 2020-07-15 17:51:42Vehicle 5 arrived 2020-07-15 17:51:42Vehicle 7 arrived 2020-07-15 17:51:42 ----------------- 3 second ----------------- Vehicle 4 passes through the intersection at 2020-07-15 17:51:43Vehicle 5 passes through the intersection at 2020-07-15 17:51:43Vehicle 7 passes through the intersection at 2020-07-15 17:51:43Vehicle 2 passes through the intersection at 2020-07-15 17:51:43Vehicle 1 passes through the intersection at 2020-07-15 17:51:43 RED LIGHT! at: 2020-07-15 17:51:44 Vehicle 3 arrived 2020-07-15 17:51:46 Vehicle 10 arrived 2020-07-15 17:51:46 Vehicle 8 arrived 2020-07-15 17:51:47 ----------------- 3 second ----------------- Vehicle 10 passes through the intersection at 2020-07-15 17:51:47Vehicle 8 passes through the intersection at 2020-07-15 17:51:47Vehicle 3 passes through the intersection at 2020-07-15 17:51:47 Vehicle 6 arrived 2020-07-15 17:51:48Vehicle 9 arrived 2020-07-15 17:51:48 Vehicle 9 passes through the intersection at 2020-07-15 17:51:48 Vehicle 6 passes through the intersection at 2020-07-15 17:51:48 ----------------- End: 2020-07-15 17:51:48 條件變數(Condition) 當執行緒需要滿足某些條件才能繼續執行時，可以使用threading模組裡的Lock()來處理。\nclass threading.Condition(lock=None) lock: Optional, default is RLock. threading.Condition提供了三種方法，來進行thread之間的溝通\nwait(): 條件不滿足時，執行緒會釋放並進入阻塞等待 notify(n=1): 條件滿足後，喚醒一個在等待池裡的執行緒 notifyAll(): 條件滿足後，喚醒所有在等待池裡的執行緒 Example：捉迷藏遊戲 遊戲開始後，Seeker先把自己眼睛矇上，蒙上眼後就通知Hider Hider接收到通知後，開始找地方將自己藏起來，再通知Seeker可以開始找了 Seeker接到通知後，就開始找hider import threading import time class Hider(threading.Thread): def __init__(self, cond, name): super(Hider, self).__init__() self.cond = cond self.name = name def run(self): time.sleep(1) # 確保先運行Seeker中的方法 self.cond.acquire() # b print('To {}: 我已經把眼睛蒙上了'.format(self.name)) print('\\t[Info] {} notify()...'.format(self.name)) self.cond.notify() print('\\t[Info] {} wait()...'.format(self.name)) self.cond.wait() # c print('To {}: 我找到你了！！！'.format(self.name)) print('\\t[Info] {} notify()...'.format(self.name)) self.cond.notify() print('\\t[Info] {} release()...'.format(self.name)) self.cond.release() print('To {}: 我贏了'.format(self.name)) class Seeker(threading.Thread): def __init__(self, cond, name): super(Seeker, self).__init__() self.cond = cond self.name = name def run(self): self.cond.acquire() print('\\t[Info] {} wait()...'.format(self.name)) self.cond.wait() print('To {}: 我已經藏好了，你快來找我吧！！！'.format(self.name)) print('\\t[Info] {} notify()...'.format(self.name)) self.cond.notify() print('\\t[Info] {} wait()...'.format(self.name)) self.cond.wait() print('\\t[Info] {} release()...'.format(self.name)) self.cond.release() print('To {}: 被你找到了，我輸了！'.format(self.name)) if __name__ == '__main__': cond = threading.Condition() seeker = Seeker(cond, 'seeker') hider = Hider(cond, 'hider') seeker.start() hider.start() [Output]\n[Info] seeker wait()... To hider: 我已經把眼睛蒙上了 [Info] hider notify()... [Info] hider wait()... To seeker: 我已經藏好了，你快來找我吧！！！ [Info] seeker notify()... [Info] seeker wait()... To hider: 我找到你了！！！ [Info] hider notify()... [Info] hider release()... To hider: 我贏了 [Info] seeker release()... To seeker: 被你找到了，我輸了！ ","id":15,"section":"posts","summary":"執行緒(Thread) 複習作業系統(Operating System)中的對於執行緒(thread)的解釋： 執行緒(thread)是OS能夠進","tags":["Multi-Thread"],"title":"[Python] Ch2: Process Management - 01 Python 多執行緒(Multi-Thread)","uri":"https://kaka-lin.github.io/my-blog/2020/07/01_multithread/","year":"2020"},{"content":"Packages (套件) 每個 Go Program 都是由套件(packages)組成的\n程式運行的入口是: package main\npackage main func main() {} Import import ( \u0026quot;fmt\u0026quot; \u0026quot;math\u0026quot; ) Exported names In Go, a name is exported if it begins with a capital letter.\nFor example, Pi is an exported name which is from the math package.\nVariables The var statement declares a list of variables; as in function arguments lists, the type is last.\n// statement (陳述) var i int // expression (表達) var j = 2 如果變數初始化是使用表達，則可以省略型別，如上所示。變數從初始值中獲得型別。 Short variable declarations := short assignment statement\n在函式中，在明確類型的地方可以用 := 取代 var。\nvar k = 3 // equal k := 3 Functions Define with function func.\nFunctions continued When two or more consecutive named function parameters share a type, you can omit the type from all but the last.\nx int, y int // equal x, y int Multiple results func swap(x, y string) (string, string) { return y, x } Named return values Go\u0026rsquo;s return values may be named. If so, they are treated as variables defined at the top of the function.\nfunc split(sum int) (x, y int) { x = sum * 4 / 9 y = sum - x return } These names should be used to document the meaning of the return value. A return statement without arguments returns the named return values. This is known as a \u0026quot;naked\u0026quot; return. Naked return statements should be used only in short functions, as with the example show here. They can harm readability in longer functions. Basic types bool string int int8 int32 int64 uint uint8 uint16 uint32 uint64 uintptr byte // alias for uint8 rune // alias for int32 float32 float64 complex64 complex128 Zero values Variables declared without an explicit initial value are given their zero value\nThe zero value is:\nnumeric type: 0 boolean type: false strings: \u0026quot;\u0026quot; Type coversions (型別轉換) The expression(表達式) T(v) convers the value to the type T.\nvar i int = 42 var f float64 = float64(i) var u uint = uint(f) // or i := 42 f := float64(i) u := uint(f) Type inference When declaring a variable without specifying an explicit type (either by using the := syntax or var = expression syntax), the variable\u0026rsquo;s type is inferred from the value on the right hand side.\nvar i int j := i // j is an int Constants Constants are declared like variable, but with the const keyword.\nConstants can be charater, string, boolean, or numeric values.\nConstants cannot be declared using the := syntax.\nconst World = \u0026quot;世界\u0026quot; Numeric Constants Numeric constants are high-precision values.\nAn untyped constant takes the type needed by its context. const ( // Create a huge number by shifting a 1 bit left 100 places. // In other words, the binary number that is 1 followed by 100 zeroes. Big = 1 \u0026lt;\u0026lt; 100 // Shift it right again 99 places, so we end up with 1\u0026lt;\u0026lt;1, or 2. Small = Big \u0026gt;\u0026gt; 99 ) ","id":16,"section":"posts","summary":"Packages (套件) 每個 Go Program 都是由套件(packages)組成的 程式運行的入口是: package main package main func main() {} Import import ( \u0026quot;fmt\u0026quot; \u0026quot;math\u0026quot; ) Exported names In Go, a name is exported if it begins with a capital letter. For example, Pi is an exported","tags":null,"title":"[Go] Ch1: Go Basics - 01 Go Basics","uri":"https://kaka-lin.github.io/my-blog/2020/07/01_go_basics/","year":"2020"},{"content":"For Go has only one looping construct, the foor loop\nfor \u0026lt;init state\u0026gt;; \u0026lt;condition\u0026gt;; \u0026lt;post state\u0026gt; sum := 0 for i := 0; i \u0026lt; 10; i++ { sum += i } Go的for看起來跟C或Java中的依樣，但是沒有 ()，但{}是必要的，如上所示。 Note For的 init 和 post statements可以為空。\nsum :=1 for ; sum \u0026lt; 1000; { sum += sum } // 1024 While Go沒有While, 因為可以省略分號(;)，C的while在Go中就是for\nsum := 1 for sum \u0026lt; 1000 { sum += sum // 1024 } Infinite loop for { // do something } If Go\u0026rsquo;s if statements are like its for loops; the expression need not be surrounded by parentheses ( ) but the braces { } are required.\nif \u0026lt;condition\u0026gt; { // do something } If with a short statement 跟for一樣，if可以在條件之前執行一個簡單的語句，這個語句的作用範圍僅在if的範圍內\nfunc pow(x, n, lim float64) float64 { if v := math.Pow(x, n); v \u0026lt; lim { return v } return lim } If and else func pow(x, n, lim float64) float64 { if v := math.Pow(x, n); v \u0026lt; lim { return v } else { fmt.Printf(\u0026quot;%g \u0026gt;= %g\\n\u0026quot;, v, lim) } return lim } Exercise: Loop and Functions 用牛頓法實現開根號函式 牛頓法:\n選擇一個初始點，然後帶入下面公式重覆計算，來求Sqrt(x)的近似值\n$z = z - ((z^2 - x) / 2z)$\n此練習我們宣告一個浮點數1.0當作我們的初始值，並且重覆計算10次，觀察結果是否與math.Sqrt()相近\npackage main import ( \u0026quot;fmt\u0026quot; \u0026quot;math\u0026quot; ) func Sqrt(x float64) float64 { // define init value z := 1.0 cal_times := 10 for cal_times \u0026gt; 0 { z -= (z*z - x) / (2 * x) cal_times -= 1 } return z } func main() { fmt.Println(Sqrt(4)) fmt.Println(math.Sqrt(4)) } Switch Go\u0026rsquo;s switch is like the one in C, C++, Java, Javascript, and PHP.\nGo的switch會自動提供break在每個case的結尾，所以不用自己寫 Go的swich case不必為常數，且值也不必為整數 switch os := runtime.GOOS; os { case \u0026quot;drawin\u0026quot;: fmt.Println(\u0026quot;OS X.\u0026quot;) case \u0026quot;linux\u0026quot;: fmt.Println(\u0026quot;Linux.\u0026quot;) default: fmt.Printf(\u0026quot;%s.\\n\u0026quot;, os) } Defer A defer statement defers the execution of a function until the surrounding function returns.\nThe deferred call's arguments are evaluated immediately, but the function call is not executed until the surrounding function returns. func main() { defer fmt.Println(\u0026quot;world\u0026quot;) fmt.Println(\u0026quot;hello\u0026quot;) } [Output]:\nhello world Sracking defers Deferred function calls are pushed onto a stack.\nWhen a function returns, its deferred calls are executed in last-in-first-out order. func main() { fmt.Println(\u0026quot;counting\u0026quot;) for i := 0; i \u0026lt; 10; i++ { defer fmt.Println(i) } fmt.Println(\u0026quot;done\u0026quot;) } [Output]:\ncounting done 9 8 7 6 5 4 3 2 1 0 ","id":17,"section":"posts","summary":"For Go has only one looping construct, the foor loop for \u0026lt;init state\u0026gt;; \u0026lt;condition\u0026gt;; \u0026lt;post state\u0026gt; sum := 0 for i := 0; i \u0026lt; 10; i++ { sum += i } Go的for看起來跟C或Java中的依樣，但是沒有 ()，但{}是必要的，如上","tags":null,"title":"[Go] Ch1: Go Basics - 02 Flow Control","uri":"https://kaka-lin.github.io/my-blog/2020/07/02_flow_control/","year":"2020"},{"content":"Structs (Structures) A struct or structure is a collection of fields.\n1. Defining a struct Using struct keyword to create a new structure type.\ntype StructName struct { field1 fieldType1 field2 fieldType2 ... } Example:\ntype Vertex struct { X int Y int } 2. Accessing Struct Fields (Members) Struct fields are accessed using a dot.\nv := Vertrx{1, 2} v.X = 4 fmt.Println(v.X) // 4 Pointers to Structs 1. Pointer A pointer holds the memory address of a value.\nThe type *T is a pointer to a T value. Its zero value is nil.\nvar *p int The \u0026amp; operator generates a pointer to its operand.\ni := 42 p = \u0026amp;i The * operator denotes the pointer\u0026rsquo;s underlying value.\nfmt.Println(*p) // read i through the pointer p *p = 21 // set i through the pointer p This is known as \u0026quot;dereferencing\u0026quot; or \u0026quot;indirecting\u0026quot;.\nUnlike C, Go has no pointer arithmetic (沒有指針運算). 2. Pointers to Structs Struct fields can be accessed through a struct pointer.\nThe syntax to create a pointer to a struct is as follows.\ns := StructType{...} p := \u0026amp;s // or p := \u0026amp;StructType{...} Example:\nv := Vertex{1, 2} p := \u0026amp;v q := \u0026amp;Vertex{3, 4} 3. Accessing the field of Struct Pointer To access the field X of a struct when we have the struct pointer p, we need to use dereferencing syntax (*p) to get the actual value of struct it is pointing to and use (*p).X to access X of that struct value.\nHowever, that notation is cumbersome, so the language permits us instead to write just p.X, without the explicit dereference.\nv := Vertex{1, 2} p := \u0026amp;v p.X = 1e3 fmt.Println(v) // {1000, 2} ","id":18,"section":"posts","summary":"Structs (Structures) A struct or structure is a collection of fields. 1. Defining a struct Using struct keyword to create a new structure type. type StructName struct { field1 fieldType1 field2 fieldType2 ... } Example: type Vertex struct { X int Y int } 2. Accessing Struct Fields (Members) Struct fields are accessed using a dot. v := Vertrx{1, 2} v.X = 4 fmt.Println(v.X) // 4 Pointers to Structs 1.","tags":null,"title":"[Go] Ch1: Go Basics - 03 Go Data Structure: `Structs`","uri":"https://kaka-lin.github.io/my-blog/2020/07/03_structs/","year":"2020"},{"content":"Array 1. Creating an Array The type [n]T is an array of n values of type T.\nThe expression\nvar a [10]int An array\u0026rsquo;s length is part of its type, so arrays cannot be resized. But Go provides a convenient way of working with array. 2. Array initialize a := [6]int{2, 3, 5, 7, 11, 13} // or a := []int{2, 3, 5, 7, 11, 13} Slices A slice is a dynamically-size, flexible view into the elements of an array.\nSlice的長度是可變的，與Array相比，提供一種更高階的觀點看待一片資料。 Slice also has continuous segments of memory locations The default value of uninitialized slice is nil Slices does not store the data. It just provides reference to an array 1. Creating a Slice Method 1: like array but no size The type []T is a slice with elements of type T.\nvar s []int // length: 0, capacity: 0 -\u0026gt; nil Method 2: use make() Create slice by using make() which is available in builtin package of golang\ns := make([]int, 5) // lenght == capacity == 5 // or s := make([]int, 5, 10) // lenght: 5, capacity: 10 Method 3: [low:high] A slice is formed by specifying two indices, a low and high bound, seperated by a colon:\nvar s []type = a[low:high] //or s := a[low:high] Example: // Elements 1 through 3 // a = [1, 2, 3, 4, 5] //var s []int = a[1:4] s := a[1:4] // [2, 3, 4] More // slice initialize a := []int{2,3,5,7,11} a1 = a[1:4] // [3 5 7] a2 = a[:2] // [2 3] a3 = a[1:] // [3 5 7 11] a4 = a[:] // [2 3 5 7 11] 2. Slices are like references to arrays A slice does not store any data, it just describes a section of an underlying array.\nChanging the elements of a slice modifies the corresponding elements of its underlying array. a := [6]int{1, 2, 3, 4, 5, 6} fmt.Println(a) // [1 2 3 4 5 6] b := a[1:4] fmt.Println(b) // [2 3 4] b[1] = 10 fmt.Println(b) // [2 10 4] fmt.Println(a) // [1 2 10 4 5 6] 3. Slice length and capacity A slice has both a length and a capacity.\nlength\nThe length of a slice is the number of elements it contains.\nNumber of elements capacity\nThe capacity of a slice is the number of elements in the underlying array\nTotal size // length len(s) // capacity cap(s) 4. Slices of slices Slices can contain any type, including other slices\nExample: 2D Array 3x3 Array\nmatrix := [][]int{ make([]int, 3), make([]int, 3), make([]int, 3), } tic-tac-toe boart(井字遊戲)\nboard := [][]string{ []string{\u0026quot;-\u0026quot;, \u0026quot;-\u0026quot;, \u0026quot;-\u0026quot;}, []string{\u0026quot;-\u0026quot;, \u0026quot;-\u0026quot;, \u0026quot;-\u0026quot;}, []string{\u0026quot;-\u0026quot;, \u0026quot;-\u0026quot;, \u0026quot;-\u0026quot;}, } 5. append function Appending new values to the slice using built-in append function.\nfunc append(s []T, vs ...T) []T If the backing array of s is too small to fit all the given values a bigger array will be allocated. The returned slice will point to the newly allocated array.\n當append的元素個數超過原slice的capacity時，append利用現有的slice建立一個新的slice，並將後續的參數附加在這個slice之後。 var s []int s = append(s, 0) 6. copy function Copying one slice into another using built-in copy function.\nfunc copy(dst []T, src []T) int copy will return the number of elements copied which is the minimum of len(dst) and len(src). 複製時，目的slice的容量必須足夠，否則會發生 cap out of range的錯誤，copy函式若執行成功，會傳回複製的元素個數。 s1 := []int{1,2,3} s2 := make([]int, 2) copy(s1, s2) 7. range function The range form of the for loop iterates over a slice or map.\nWhen ranging over a slice, two values are returned for each iteration.\nindex copy of the element at that index. var a = []int{1,2,3,4,5} for i, v := range a { fmt.Printf(\u0026quot;a[%d]: %d\\n\u0026quot;, i, v) } Skip the index or value Can skip the index or value by assigning to _\nfor i, _ := range array for _, v := range array If only want the index, can omit the second variable.\nfor i := range array Exercise: Slices Implement Pic. It should return a slice of length dy, each element of which is a slice of dx 8-bit unsigned integers. When you run the program, it will display your picture, interpreting the integers as grayscale (well, bluescale) values.\nThe choice of image is up to you. Interesting functions include (x+y)/2, x*y, and x^y.\nfunc Pic(dx, dy int) [][]uint8 { image := make([][]uint8, dy) for i := range image { image[i] = make([]uint8, dx) for j := range image[i] { image[i][j] = uint8((i+j) / 2) } } return image } ","id":19,"section":"posts","summary":"Array 1. Creating an Array The type [n]T is an array of n values of type T. The expression var a [10]int An array\u0026rsquo;s length is part of its type, so arrays cannot be resized. But Go provides a convenient way of working with array. 2. Array initialize a := [6]int{2, 3, 5, 7, 11, 13} // or a := []int{2, 3, 5, 7, 11, 13} Slices A slice is","tags":null,"title":"[Go] Ch1: Go Basics - 04 Go Data Structure: `Array` \u0026 `Slice`","uri":"https://kaka-lin.github.io/my-blog/2020/07/04_array_slice/","year":"2020"},{"content":"Maps A map maps key to value.\nGolang provides map data structure which implements hashtable.\n1. Creating a Maps The zero value of a map is nil. A nil map has no keys, nor can keys be added.\nMethod 1: like array // nil map var m map[keyTpye]valueType Note:\n如果使用此方法來create map，還需要使用make()來初始化此map，否則無法存放key-value.\nMethod 2: use make() The make function returns a map od the given type, initialized and ready for use.\nm := make(map[keyTpye]valueType) // or // Define a map var m map[keyTpye]valueType // Using make function to initiate map m = make(map[keyTpye]valueType) 2. Maps initialize Map literals are like struct literals, but the keys are required.\nvar m = map[keyType]valueType { key1: value1, key2: value2, } 3. Mutating Maps Insert or Update Insert or update an element in map m\nm[key] = value Detele Delete an element\ndelete(m, key) Check if the key is exist Test that a key is present with a two-value assignment:\nv, ok := m[key] If key is in map, ok is true. If not, ok is false. If key is not in map, then v is zero value for the map\u0026rsquo;s element type. Exercise: Maps Implement WordCount. It should return a map of the counts of each “word” in the string s. The wc.Test function runs a test suite against the provided function and prints success or failure.\nfunc WordCount(s string) map[string]int { m := make(map[string]int) //a := strings.Split(s, \u0026quot; \u0026quot;) a := string.Fields(s) for _, c := range a { m[c]++ } return m } ","id":20,"section":"posts","summary":"Maps A map maps key to value. Golang provides map data structure which implements hashtable. 1. Creating a Maps The zero value of a map is nil. A nil map has no keys, nor can keys be added. Method 1: like array // nil map var m map[keyTpye]valueType Note: 如果使用此方法來create map，還需要","tags":null,"title":"[Go] Ch1: Go Basics - 05 Go Data Structure: `Maps`","uri":"https://kaka-lin.github.io/my-blog/2020/07/05_maps/","year":"2020"},{"content":"What is Array? 可以想像成櫃子，櫃子上有某些連續的編號 \u0026ndash;\u0026gt; 有編號的櫃子\nMemory is (Generally Viewed as) Array 記憶體就是一個很大的Array\naddress就是index Array as Memory Block in C/C++ 反過來說Array也是記憶體\nNote: 一個 Data Structure 看的是如何取用與維護 Array as Abstract Data Structure C++ STL Vector: a Growing Array 完整的array implementation\nTwo Dimensional Array 最熟悉的 Two Dimensional Array: 圖片\nOne Block Implementation of 2D Array 把2D展開成1D\nArray of Array Implementation of 2D Array ex: 第一個raw與第二個raw分開放(每個raw有5個element)\nComparison of Two Implementations # one block array of array space elements elments \u0026amp; nRow pointers construct fixed prop. nRow get one deref two deref tradeoff: one block: faster \u0026amp; succinct array of array: again easier for programmers A Table between Two Programs 以下兩種方式，哪種比較快？\nAns: rowsum()\n因為快取機制，rowsum() 是連續的記憶體，比較吃香\nOrdered Array Definition of Ordered Array An array of consecutive elements with ordered values.\narr[0] \u0026lt;= arr[1] \u0026lt;= arr[2] \u0026lt;= ... \u0026lt;= arr[end-1] insert of Ordered Array 不能亂插，需考慮值得大小\nexample:\n[2, 6, 7, 13] ^ | 10 ------- Resutl: [2, 6, 7, 10, 13] Maintain Ordered Array\n以前在維護Array時只需要他的開頭(Head)的位置(因為其他位置都可以從開頭算出來)，現在如果要維護Consecutive Array時需要知道array的尾巴(Tail)，這樣才能知道下次要放新東西時該往哪邊繼續放下去(資料的地方到哪)\n田神: 希望同學有機會想想，修正上面的程式碼～\nconstruct of Ordered Array Example: 1, 3, 7, 4, 6, 5, 2\nMethod 1: Selection sort 其中一種方法是使用 getMinIndex()幫我們找出一個Array中最小的，每次叫出最小的，放到new array裡或是與原來的交換，依此類推就可以排出ordered array。 此方法叫做選擇排序法(selection sort)。\ngetMinIndex multiple times (selection sort) Method 2: Insertion sort 假設array的左邊是排好序的array(一開始就是index 0)， 右邊是還沒排好的的array(一開始就是index 1~end)，然後從右邊抽一個數字(右邊array的第一個位置)插到左邊，依此類推就可以排出ordered array。\ninsert multiple times (insertion sort) update and remove of Ordered Array Binary Search with Ordered Array Application: Book Search within (Digital) Library 數位圖書館，每一本書前面有索引(book ID number)，在同一個架子上時書會按照ID大小排序(Ordered Array)\nMethod 1: Sequential Search Algorithm 已經知道在某個架子上了，那就從左邊找到右邊\nfor i from 0 to tail if (arr[i].ID == toFind.ID) return FIND end for eturn NOTFIND 此方法並沒有用到ordered array的優點，就算架子上的書沒按照順序排也沒差。\nMethod 2: Sequential Search Algorithm with Cut (Ordered Array) Possibly easier to declare not found\ntoFind.ID = 5566 for i from 0 to tail if (arr[i].ID == toFind.ID) return FIND if (arr[i].ID \u0026gt; toFind.ID) return NOTFIND end for eturn NOTFIND Method 3: Binary Search Algorithm (Ordered Array) begin = 0 end = tail while (begin != end) { mid = (begin + end) / 2 if (arr[mid] \u0026gt; toFind) end = mid - 1 else if (arr[mid] \u0026lt; toFind) begin = mid + 1 else if arr[mid] = toFind FIND } ","id":21,"section":"posts","summary":"What is Array? 可以想像成櫃子，櫃子上有某些連續的編號 \u0026ndash;\u0026gt; 有編號的櫃子 Memory is (Generally Viewed as) Array 記憶體就是一個很大的Array address就是index Array as Memory Block in C/C++","tags":["Array"],"title":"[DSA] NTU CSIE DSA, 01: Array","uri":"https://kaka-lin.github.io/my-blog/2020/07/01_array/","year":"2020"},{"content":"Database Basics Database Basics What is a Database The basic functions for manipulating a database: CRUD Database Management System (DBMS) 資料庫的類型 關聯式資料庫 非關聯式資料庫(NoSQL) SQL與NoSQL差異 Database Transaction SQL SQL語法 SQL - 四種語言 SQL Datatype Object Relational Mapping (ORM) What is a Database 資料庫(Database)就是儲存資料的地方，使用者可以對資料庫中的資料執行新增、讀取、更新、刪除等操作。\n正式定義：\n資料庫是一群相關資料的集合題 The basic functions for manipulating a database: CRUD C: Create R: Read U: Update D: Delete Database Management System (DBMS) 資料庫是儲存資料的地方，但是如果資料只是儲存到電腦的檔案中，其效用並不大，因此我們需要一套能夠讓我們很方便的管理這些資料庫檔案的軟體，就是所謂的資料庫管理系統(Database Management System, DBMS)\nDatabase System = Database + DBMS 資料庫的類型 資料庫管理系統可以依據所支援的資料庫模型來作分類\n階層式(Hierarchical)資料庫\n是一種由上而下(Top-down)的結構，資料之間是一種樹狀的關係，所以又稱為樹狀結構(Tree)。 網路式(Network)資料庫\n結構和階層式類似，差別是提供多對多(M:N)的關係，就像一張網子一樣，每一個子節點可以有多個父節點相連，可以消除階層式的資料重覆問題。 關聯式(Relational)\n關聯式資料庫是以2維的矩陣來儲存資料(把資料儲存在表格的欄、列之中)，而儲存在欄、列裡的資料必會有所`關聯`，所以這種儲存資料的方式才會稱為關聯式資料庫，而儲存資料的表格稱為資料表。 優點：可以從一個資料表中的欄位透過資料表的關聯，而找到另一個資料表中的資料 Image reference: 陳建成老師 - 資料庫系統 而現今主流的資料庫類型為：\n關聯式資料庫(Relational Database Management System, RDBMS) NoSQL(Not Only SQL)資料庫 關聯式資料庫 SQLite MySQL MariaDB (MySQL的代替品) PostgreSQL Microsoft SQL Server Oracle DB IBM DB2 非關聯式資料庫(NoSQL) MongoDB Redis Firebase Realtime Database SQL與NoSQL差異 SQL: 表格 NoSQL: JSON Database Transaction 資料庫事務，包含一組資料庫操作的邏輯單元工作，在事務中包含的資料庫操作是不可分割的整體，這些操作要麼一起做，要麼一起回滾(Roll Back)到執行前的狀態。\n事務的ACID特性:\natomicity(原子性)：事務不可分割，不可約簡\n一個事務中的所有操作，或者全部完成，或者全部不完成，不會結束在中間某個環節。事務在執行過程中發生錯誤，會被回滾(Rollback)到事物開始前的狀態，就像這個事務從來沒有執行過一樣。 consistency(一致性)\n在事務開始之前和事務結束以後，資料庫的完整性沒有被破壞。也就是若這次事務成功，整個資料庫都必須是事務結束後的狀態 isolation(隔離性)\n資料庫允許多個並發事務同時對其數據進行讀寫和修改的能力，隔離性可以防止多個事務並發執行時由所交叉執行而導致數據的不一致。 事務隔離分為不同等級:\nRead uncommitted Read committed Repeatable read Serializable durability(持續性)\n事務處理結束後，對數據的修改就是永久的，即使系統故障也不會丟失。 SQL SQL: 標準化程式語言(Structured Query Language)\n是一種資料庫查詢和程式設計語言，用於存取資料以及查詢、更新和管理關聯式資料庫系統 SQL Tutorial\nSQL語法 SQL主要是以關鍵字(keyword)和表格名稱(table)和欄位名稱(column)當作一段完整的語句。\nSQL語法使用分號;當作結尾，英文不分大小寫，單字間使用空白間隔。\n單行註解： -- 多行註解： /**/ SQL - 四種語言 DDL(Data Definition Language)：資料定義語言\n能建立或刪除資料庫和表格等用來儲存的單位\nCREATE ALTER: 修改資料表結構，新增or刪除欄位 DROP DML(Data Manipulation Language)：資料操作語言\n用於操縱表格裡資料\nINSERT UPDATE DELETE DQL(Data Query Language)：資料查詢語言\n負責進行資料查詢，不會對資料本身進行修改的語句\nSELECT DCL(Data Control Language)：資料控制語言\n用來控制資料表格、檢視表之存取權限，提供資料庫的安全性\nCOMMIT: 完成交易作業 ROLLBACK: 交易作業異常，將已變動的資料回復到交易開始的狀態 GRANT: 賦予使用者權限 REVOKE: 取消使用者的權限 SQL Datatype 微軟-資料類型 (Transact-SQL) Object Relational Mapping (ORM) Object Relational Mapping (ORM): 物件關聯對映\n將關聯式資料庫映射至物件導向的資料抽象化技術， 讓程式開發人員可以用操作物件的方式對資料庫進行操作， 而不是直接使用SQL語法對資料庫進行操作。 優點：\n通用性：可以不用管底層的資料庫是使用哪種，僅須使用同一套語法攥寫即可，靈活性與擴展性佳。 安全性：可以防止SQL injection (SQL注入) 攻擊 就是駭客在傳輸到網站Server的資料裡直接寫SQL，當我們網站某段SQL直接讀取駭客傳來的資料並執行時，如果傳來的是正常的資料就會沒事，如果傳來的是SQL語句，且包含惡意（如：DELETE）就會讓網站資料被移除。 簡化性：使得我們資料庫結構化，如ORM可以將MySQL轉換成Python工程師可以讀懂的Class，可讀性高。 缺點：\n效能：自動化進行關聯式資料庫的Mapping一定需要消耗一定的效能。 複雜的查詢上ORM仍然力不從心，如：多表聯查、where條件複雜的查詢時。 ","id":22,"section":"posts","summary":"Database Basics Database Basics What is a Database The basic functions for manipulating a database: CRUD Database Management System (DBMS) 資料庫的類型 關聯式資料庫 非關聯式資料庫(NoSQL) SQL與NoSQL差異 Database Transaction SQL SQL語法 SQL - 四種語","tags":null,"title":"[DB] Database Basics","uri":"https://kaka-lin.github.io/my-blog/2020/06/db_basics/","year":"2020"},{"content":"MySQL - Basics SQL Tutorial MySQL Documentation MySQL - Tutorial Quickstart for Cloud SQL for MySQL Load ipython-sql ipython-sql:\n是jupyter notebook的extension，用來擴充jupyter對SQL的支援 其底層是使用SQLAlchemy %load_ext sql # for engines that do not support autocomit %config SqlMagic.autocommit=False Connect Database Because ipython-sql is based on SQLAlchemy, we use the SQLAlchemy\u0026rsquo;s DBAPI to connect the MySQL database via the mysqlclient (maintained fork of MySQL-Python) driver.\nSQLAlchemy - MySQL DBAPI\nmysql+mysqldb://\u0026lt;user\u0026gt;:\u0026lt;password\u0026gt;@\u0026lt;host\u0026gt;[:\u0026lt;port\u0026gt;]/\u0026lt;dbname\u0026gt; %sql mysql+mysqldb://root:\u0026lt;passwd\u0026gt;@35.201.196.222/kaka_test %%sql SELECT * FROM entries; * mysql+mysqldb://root:***@35.201.196.222/kaka_test 2 rows affected. guestName content entryID first guest I got here 1 second guest Me too! 2 MySQL Version %sql SHOW VARIABLES LIKE '%version%'; * mysql+mysqldb://root:***@35.201.196.222/kaka_test 8 rows affected. Create Table MySQL - Data Type %%sql CREATE TABLE persons( PRIMARY KEY (person_id), person_id INT NOT NULL AUTO_INCREMENT, firstname VARCHAR(255) NOT NULL, lastname VARCHAR(255), age INT, height FLOAT, weight FLOAT, city VARCHAR(255) ); * mysql+mysqldb://root:***@35.201.196.222/kaka_test 0 rows affected. [] CRUD for Data C: Create R: Read U: Update D: Delete Create Data: SQL INSERT INTO %%sql INSERT INTO persons VALUES (10, 'kaka','Lin', 28, 175, 70, 'Taipei'); INSERT INTO persons (firstname, lastname, age, height, weight, city) VALUES ('kiwi','Li', 30, 173, 70, 'Taipei'); * mysql+mysqldb://root:***@35.201.196.222/kaka_test 1 rows affected. 1 rows affected. [] Read Data: SQL SELECT %%sql SELECT * FROM persons; * mysql+mysqldb://root:***@35.201.196.222/kaka_test 2 rows affected. person_id firstname lastname age height weight city 10 kaka Lin 28 175.0 70.0 Taipei 11 kiwi Li 30 173.0 70.0 Taipei Update Data: SQL UPDATE %%sql UPDATE persons SET weight = 68 WHERE firstname = 'kaka'; * mysql+mysqldb://root:***@35.201.196.222/kaka_test 1 rows affected. [] %%sql SELECT * FROM persons; * mysql+mysqldb://root:***@35.201.196.222/kaka_test 2 rows affected. person_id firstname lastname age height weight city 10 kaka Lin 28 175.0 68.0 Taipei 11 kiwi Li 30 173.0 70.0 Taipei Delete Data: SQL DELETE Before we delete data, we first add the data that we want to delete.\n%%sql INSERT INTO persons VALUES (3, 'albert','Lin', 28, 180, 70, 'Taipei'); * mysql+mysqldb://root:***@35.201.196.222/kaka_test 1 rows affected. [] %%sql SELECT * FROM persons; * mysql+mysqldb://root:***@35.201.196.222/kaka_test 3 rows affected. person_id firstname lastname age height weight city 3 albert Lin 28 180.0 70.0 Taipei 10 kaka Lin 28 175.0 68.0 Taipei 11 kiwi Li 30 173.0 70.0 Taipei %%sql DELETE FROM persons WHERE person_id = 3; * mysql+mysqldb://root:***@35.201.196.222/kaka_test 1 rows affected. [] %%sql SELECT * FROM persons; * mysql+mysqldb://root:***@35.201.196.222/kaka_test 2 rows affected. person_id firstname lastname age height weight city 10 kaka Lin 28 175.0 68.0 Taipei 11 kiwi Li 30 173.0 70.0 Taipei SQL WHERE %%sql INSERT INTO persons (firstname, lastname, age, height, weight, city) VALUES ('Albert', 'Lin', 28, 160, 70, 'Taipei'), ('Andy', 'Wei', 24, 175, 72, 'Teipei'), ('kevin', 'Wang', 30, 174, 63, 'San Francisco'), ('kevin', 'Wei', 27, 178, 65, 'Taipei'), ('David', 'Kang', 26, 175, 65, 'Washington'), ('Matt', 'Wang', 26, 172, 72, 'Taipei'), ('kaka-ideal', 'Lin', 28, 178, 70, 'Janpan'); * mysql+mysqldb://root:***@35.201.196.222/kaka_test 7 rows affected. [] %%sql SELECT * FROM persons * mysql+mysqldb://root:***@35.201.196.222/kaka_test 9 rows affected. person_id firstname lastname age height weight city 10 kaka Lin 28 175.0 68.0 Taipei 11 kiwi Li 30 173.0 70.0 Taipei 12 Albert Lin 28 160.0 70.0 Taipei 13 Andy Wei 24 175.0 72.0 Taipei 14 kevin Wang 30 174.0 63.0 San Francisco 15 kevin Wei 27 178.0 65.0 Taipei 16 David Kang 26 175.0 65.0 Washington 17 Matt Wang 26 172.0 72.0 Taipei 18 kaka-ideal Lin 28 178.0 70.0 Janpan %%sql SELECT * FROM persons WHERE age = 28; * mysql+mysqldb://root:***@35.201.196.222/kaka_test 3 rows affected. person_id firstname lastname age height weight city 10 kaka Lin 28 175.0 68.0 Taipei 12 Albert Lin 28 160.0 70.0 Taipei 18 kaka-ideal Lin 28 173.0 70.0 Janpan SQL AND, OR and NOT AND %%sql SELECT * FROM persons WHERE age = 28 AND height \u0026gt; 170; * mysql+mysqldb://root:***@35.201.196.222/kaka_test 2 rows affected. person_id firstname lastname age height weight city 10 kaka Lin 28 175.0 68.0 Taipei 18 kaka-ideal Lin 28 178.0 70.0 Janpan OR %%sql SELECT * FROM persons WHERE age = 28 OR height \u0026gt; 170; * mysql+mysqldb://root:***@35.201.196.222/kaka_test 9 rows affected. person_id firstname lastname age height weight city 10 kaka Lin 28 175.0 68.0 Taipei 11 kiwi Li 30 173.0 70.0 Taipei 12 Albert Lin 28 160.0 70.0 Taipei 13 Andy Wei 24 175.0 72.0 Taipei 14 kevin Wang 30 174.0 63.0 San Francisco 15 kevin Wei 27 178.0 65.0 Taipei 16 David Kang 26 175.0 65.0 Washington 17 Matt Wang 26 172.0 72.0 Taipei 18 kaka-ideal Lin 28 178.0 70.0 Janpan SQL IN Operator The IN operator allows you to specify multiple values in a WHERE clause.\n%%sql SELECT * FROM persons WHERE age = 28 OR age = 26; * mysql+mysqldb://root:***@35.201.196.222/kaka_test 5 rows affected. person_id firstname lastname age height weight city 10 kaka Lin 28 175.0 68.0 Taipei 12 Albert Lin 28 160.0 70.0 Taipei 16 David Kang 26 175.0 65.0 Washington 17 Matt Wang 26 172.0 72.0 Taipei 18 kaka-ideal Lin 28 178.0 70.0 Janpan %%sql SELECT * FROM persons WHERE age IN (26, 28); * mysql+mysqldb://root:***@35.201.196.222/kaka_test 5 rows affected. person_id firstname lastname age height weight city 10 kaka Lin 28 175.0 68.0 Taipei 12 Albert Lin 28 160.0 70.0 Taipei 16 David Kang 26 175.0 65.0 Washington 17 Matt Wang 26 172.0 72.0 Taipei 18 kaka-ideal Lin 28 178.0 70.0 Janpan Not %%sql SELECT * FROM persons WHERE age != 28; * mysql+mysqldb://root:***@35.201.196.222/kaka_test 6 rows affected. person_id firstname lastname age height weight city 11 kiwi Li 30 173.0 70.0 Taipei 13 Andy Wei 24 175.0 72.0 Taipei 14 kevin Wang 30 174.0 63.0 San Francisco 15 kevin Wei 27 178.0 65.0 Taipei 16 David Kang 26 175.0 65.0 Washington 17 Matt Wang 26 172.0 72.0 Taipei SQL ORDER BY SELECT column1, column2, ... FROM table_name ORDER BY column1, column2, ... ASC|DESC; Default: ASC %%sql SELECT * FROM persons ORDER BY age; * mysql+mysqldb://root:***@35.201.196.222/kaka_test 9 rows affected. person_id firstname lastname age height weight city 13 Andy Wei 24 175.0 72.0 Taipei 16 David Kang 26 175.0 65.0 Washington 17 Matt Wang 26 172.0 72.0 Taipei 15 kevin Wei 27 178.0 65.0 Taipei 10 kaka Lin 28 175.0 68.0 Taipei 12 Albert Lin 28 160.0 70.0 Taipei 18 kaka-ideal Lin 28 178.0 70.0 Janpan 11 kiwi Li 30 173.0 70.0 Taipei 14 kevin Wang 30 174.0 63.0 San Francisco SQL LIKE Operator The LIKE operator is used in a WHERE clause to search for a specified pattern in a column.\nThere are two wildcards often used in conjunction with the LIKE operator:\n% : The percent sign represents zero, one, or multiple characters _ : The underscore represents a single character %%sql SELECT * FROM persons WHERE city LIKE '%pei%'; * mysql+mysqldb://root:***@35.201.196.222/kaka_test 6 rows affected. person_id firstname lastname age height weight city 10 kaka Lin 28 175.0 68.0 Taipei 11 kiwi Li 30 173.0 70.0 Taipei 12 Albert Lin 28 160.0 70.0 Taipei 13 Andy Wei 24 175.0 72.0 Taipei 15 kevin Wei 27 178.0 65.0 Taipei 17 Matt Wang 26 172.0 72.0 Taipei MySQL - Functions MySQL Function Modify Table: SQL ALTER TABLE Add a new column in an existing table\nALTER TABLE table_name ADD column_name datatype; %%sql ALTER TABLE persons ADD height_meters REAL; UPDATE persons SET height_meters = round(height / 100, 2); SELECT * FROM persons; * mysql+mysqldb://root:***@35.201.196.222/kaka_test 0 rows affected. 9 rows affected. 9 rows affected. person_id firstname lastname age height weight city height_meters 10 kaka Lin 28 175.0 68.0 Taipei 1.75 11 kiwi Li 30 173.0 70.0 Taipei 1.73 12 Albert Lin 28 160.0 70.0 Taipei 1.6 13 Andy Wei 24 175.0 72.0 Taipei 1.75 14 kevin Wang 30 174.0 63.0 San Francisco 1.74 15 kevin Wei 27 178.0 65.0 Taipei 1.78 16 David Kang 26 175.0 65.0 Washington 1.75 17 Matt Wang 26 172.0 72.0 Taipei 1.72 18 kaka-ideal Lin 28 178.0 70.0 Janpan 1.78 Drop Table %%sql DROP TABLE persons; * mysql+mysqldb://root:***@35.201.196.222/kaka_test 0 rows affected. [] ","id":23,"section":"posts","summary":"MySQL - Basics SQL Tutorial MySQL Documentation MySQL - Tutorial Quickstart for Cloud SQL for MySQL Load ipython-sql ipython-sql: 是jupyter notebook的extension，用來擴充jupyter對SQL的支援 其底層是使用","tags":["MySQL"],"title":"[DB] Mysql Basics","uri":"https://kaka-lin.github.io/my-blog/2020/06/mysql-basics/","year":"2020"},{"content":"SQLAlchemy - basics SQLAlchemy - Tutorial\nimport sqlalchemy from sqlalchemy import create_engine, Table from sqlalchemy.ext.declarative import declarative_base from sqlalchemy import Column, ForeignKey, Integer, String, Numeric from sqlalchemy.orm import sessionmaker sqlalchemy.__version__ Connect Database # SQLite #connect_db = 'sqlite:///test.db' # MySQL connect_db = 'mysql+mysqldb://root:\u0026lt;passwd\u0026gt;@35.201.196.222/kaka_test' ''' create_engine 此時只有建立SQLAlchemy Engine instance(實例) 此時還沒真正真正連到資料庫 只有第一個SQL指令被下達時，才會真正連到資料庫 ''' engine = create_engine(connect_db, echo=True, encoding=\u0026quot;utf8\u0026quot;) !ls -al total 80 drwxr-xr-x 5 kakalin staff 160 May 8 17:19 \u001b[1m\u001b[36m.\u001b[m\u001b[m drwxr-xr-x 11 kakalin staff 352 May 6 15:51 \u001b[1m\u001b[36m..\u001b[m\u001b[m drwxr-xr-x 3 kakalin staff 96 May 8 13:56 \u001b[1m\u001b[36m.ipynb_checkpoints\u001b[m\u001b[m -rw-r--r-- 1 kakalin staff 264 May 8 14:10 README.md -rw-r--r-- 1 kakalin staff 33194 May 8 17:19 sqlalchemy-basics.ipynb Create Table: Declare Mapping SQLAlchemy ORM - Declaring Mapping\n在使用ORM時，我們要先描述資料庫表格，然後定義我們要映射(mapping)到這些表格的類別(classes)\nCreate base class 我們使用declarative_base()來建立一個基礎類別 Base = declarative_base() Defines a class (table) Column and Data Types\nclass User(Base): __tablename__ = 'user' id = Column(Integer, primary_key=True) firstname = Column(String(255)) lastname = Column(String(255)) age = Column(Integer) height = Column(Numeric) weight = Column(Numeric) city = Column(String(255)) def __init__(self, id, firstname, lastname, age, height, weight, city): self.id = id self.firstname = firstname self.lastname = lastname self.age = age self.height = height self.weight = weight self.city = city def __repr__(self): return \u0026quot;\u0026lt;User({}, name: {} {}, age: {}, H: {}, W: {}, city: {})\u0026gt;\u0026quot;.format( self.id, self.firstname, self.lastname, self.age, int(self.height), int(self.weight), self.city) Create Table Each Table object is a member of a larger collection known as MetaData and this object is available using the .metadata attribute of a declarative base class. The MetaData.create_all() method is, passing in our Engine as a source of database connectivity.\nFor all tables that haven’t been created yet, it issues CREATE TABLE statements to the database.\nBase.metadata.create_all(engine) 2020-05-08 17:20:20,005 INFO sqlalchemy.engine.base.Engine SHOW VARIABLES LIKE 'sql_mode' 2020-05-08 17:20:20,011 INFO sqlalchemy.engine.base.Engine () 2020-05-08 17:20:20,051 INFO sqlalchemy.engine.base.Engine SHOW VARIABLES LIKE 'lower_case_table_names' 2020-05-08 17:20:20,052 INFO sqlalchemy.engine.base.Engine () 2020-05-08 17:20:20,189 INFO sqlalchemy.engine.base.Engine SELECT DATABASE() 2020-05-08 17:20:20,190 INFO sqlalchemy.engine.base.Engine () 2020-05-08 17:20:20,281 INFO sqlalchemy.engine.base.Engine show collation where `Charset` = 'utf8mb4' and `Collation` = 'utf8mb4_bin' 2020-05-08 17:20:20,288 INFO sqlalchemy.engine.base.Engine () 2020-05-08 17:20:20,354 INFO sqlalchemy.engine.base.Engine SELECT CAST('test plain returns' AS CHAR(60)) AS anon_1 2020-05-08 17:20:20,357 INFO sqlalchemy.engine.base.Engine () 2020-05-08 17:20:20,397 INFO sqlalchemy.engine.base.Engine SELECT CAST('test unicode returns' AS CHAR(60)) AS anon_1 2020-05-08 17:20:20,398 INFO sqlalchemy.engine.base.Engine () 2020-05-08 17:20:20,437 INFO sqlalchemy.engine.base.Engine SELECT CAST('test collated returns' AS CHAR CHARACTER SET utf8mb4) COLLATE utf8mb4_bin AS anon_1 2020-05-08 17:20:20,438 INFO sqlalchemy.engine.base.Engine () 2020-05-08 17:20:20,578 INFO sqlalchemy.engine.base.Engine DESCRIBE `user` 2020-05-08 17:20:20,578 INFO sqlalchemy.engine.base.Engine () 2020-05-08 17:20:20,616 INFO sqlalchemy.engine.base.Engine ROLLBACK 2020-05-08 17:20:20,661 INFO sqlalchemy.engine.base.Engine CREATE TABLE user ( id INTEGER NOT NULL AUTO_INCREMENT, firstname VARCHAR(255), lastname VARCHAR(255), age INTEGER, height NUMERIC, weight NUMERIC, city VARCHAR(255), PRIMARY KEY (id) ) 2020-05-08 17:20:20,662 INFO sqlalchemy.engine.base.Engine () 2020-05-08 17:20:20,724 INFO sqlalchemy.engine.base.Engine COMMIT !ls -al total 80 drwxr-xr-x 5 kakalin staff 160 May 8 17:19 \u001b[1m\u001b[36m.\u001b[m\u001b[m drwxr-xr-x 11 kakalin staff 352 May 6 15:51 \u001b[1m\u001b[36m..\u001b[m\u001b[m drwxr-xr-x 3 kakalin staff 96 May 8 13:56 \u001b[1m\u001b[36m.ipynb_checkpoints\u001b[m\u001b[m -rw-r--r-- 1 kakalin staff 264 May 8 14:10 README.md -rw-r--r-- 1 kakalin staff 33194 May 8 17:19 sqlalchemy-basics.ipynb SQLAlchemy ORM - Creating Session In order to interact with the database, we need to obtain its handle. A session object is a handle to the database. Session class is defined using sessionmaker():\na configurable session factory method which is bound to the engine object created earlier.\nSession = sessionmaker(bind=engine) session = Session() CRUD for Data SQLAlchemy ORM - Adding Objects: SQL INSERT INTO We have declared a Customer class that has been mapped to the customer\u0026rsquo;s table.\nWe have to declare an object of this class and persistently add it to the table by add() method of the session object.\nuser_1 = User(1, 'kaka', 'Lin', 28, 175, 70, 'Taipei') user_2 = User(2, 'kiwi', 'Li', 30, 173, 70, 'Taipei') session.add_all([ user_1, user_2 ]) Note that this transaction is pending until the same is flushed using commit() method.\nsession.commit() 2020-05-08 17:20:20,988 INFO sqlalchemy.engine.base.Engine BEGIN (implicit) 2020-05-08 17:20:20,995 INFO sqlalchemy.engine.base.Engine INSERT INTO user (id, firstname, lastname, age, height, weight, city) VALUES (%s, %s, %s, %s, %s, %s, %s) 2020-05-08 17:20:21,005 INFO sqlalchemy.engine.base.Engine ((1, 'kaka', 'Lin', 28, 175, 70, 'Taipei'), (2, 'kiwi', 'Li', 30, 173, 70, 'Taipei')) 2020-05-08 17:20:21,098 INFO sqlalchemy.engine.base.Engine COMMIT SQLAlchemy ORM - Using Query: SQL SELECT All SELECT statements generated by SQLAlchemy ORM are constructed by Query object.\n\u0026quot;\u0026quot;\u0026quot;Equivalent SELECT * FROM user \u0026quot;\u0026quot;\u0026quot; resutl = session.query(User).all() resutl 2020-05-08 17:20:21,217 INFO sqlalchemy.engine.base.Engine BEGIN (implicit) 2020-05-08 17:20:21,220 INFO sqlalchemy.engine.base.Engine SELECT user.id AS user_id, user.firstname AS user_firstname, user.lastname AS user_lastname, user.age AS user_age, user.height AS user_height, user.weight AS user_weight, user.city AS user_city FROM user 2020-05-08 17:20:21,223 INFO sqlalchemy.engine.base.Engine () [\u0026lt;User(1, name: kaka Lin, age: 28, H: 175, W: 70, city: Taipei)\u0026gt;, \u0026lt;User(2, name: kiwi Li, age: 30, H: 173, W: 70, city: Taipei)\u0026gt;] SQLAlchemy ORM - Updating Objects: SQL UPDATE x = session.query(User).get(1) x \u0026lt;User(1, name: kaka Lin, age: 28, H: 175, W: 70, city: Taipei)\u0026gt; x.weight = 68 session.commit() 2020-05-08 17:20:21,319 INFO sqlalchemy.engine.base.Engine UPDATE user SET weight=%s WHERE user.id = %s 2020-05-08 17:20:21,323 INFO sqlalchemy.engine.base.Engine (68, 1) 2020-05-08 17:20:21,386 INFO sqlalchemy.engine.base.Engine COMMIT session.query(User).all() 2020-05-08 17:20:21,487 INFO sqlalchemy.engine.base.Engine BEGIN (implicit) 2020-05-08 17:20:21,495 INFO sqlalchemy.engine.base.Engine SELECT user.id AS user_id, user.firstname AS user_firstname, user.lastname AS user_lastname, user.age AS user_age, user.height AS user_height, user.weight AS user_weight, user.city AS user_city FROM user 2020-05-08 17:20:21,497 INFO sqlalchemy.engine.base.Engine () [\u0026lt;User(1, name: kaka Lin, age: 28, H: 175, W: 68, city: Taipei)\u0026gt;, \u0026lt;User(2, name: kiwi Li, age: 30, H: 173, W: 70, city: Taipei)\u0026gt;] SQLAlchemy ORM - Deleting Related Objects: SQL DELETE user_3 = User(3, 'albert', 'Lin', 28, 180, 70, 'Taipei') session.add(user_3) session.commit() 2020-05-08 17:20:21,561 INFO sqlalchemy.engine.base.Engine INSERT INTO user (id, firstname, lastname, age, height, weight, city) VALUES (%s, %s, %s, %s, %s, %s, %s) 2020-05-08 17:20:21,568 INFO sqlalchemy.engine.base.Engine (3, 'albert', 'Lin', 28, 180, 70, 'Taipei') 2020-05-08 17:20:21,624 INFO sqlalchemy.engine.base.Engine COMMIT session.query(User).all() 2020-05-08 17:20:21,740 INFO sqlalchemy.engine.base.Engine BEGIN (implicit) 2020-05-08 17:20:21,743 INFO sqlalchemy.engine.base.Engine SELECT user.id AS user_id, user.firstname AS user_firstname, user.lastname AS user_lastname, user.age AS user_age, user.height AS user_height, user.weight AS user_weight, user.city AS user_city FROM user 2020-05-08 17:20:21,748 INFO sqlalchemy.engine.base.Engine () [\u0026lt;User(1, name: kaka Lin, age: 28, H: 175, W: 68, city: Taipei)\u0026gt;, \u0026lt;User(2, name: kiwi Li, age: 30, H: 173, W: 70, city: Taipei)\u0026gt;, \u0026lt;User(3, name: albert Lin, age: 28, H: 180, W: 70, city: Taipei)\u0026gt;] x = session.query(User).get(3) session.delete(x) session.commit() 2020-05-08 17:20:21,819 INFO sqlalchemy.engine.base.Engine DELETE FROM user WHERE user.id = %s 2020-05-08 17:20:21,822 INFO sqlalchemy.engine.base.Engine (3,) 2020-05-08 17:20:21,866 INFO sqlalchemy.engine.base.Engine COMMIT session.query(User).all() 2020-05-08 17:20:21,962 INFO sqlalchemy.engine.base.Engine BEGIN (implicit) 2020-05-08 17:20:21,966 INFO sqlalchemy.engine.base.Engine SELECT user.id AS user_id, user.firstname AS user_firstname, user.lastname AS user_lastname, user.age AS user_age, user.height AS user_height, user.weight AS user_weight, user.city AS user_city FROM user 2020-05-08 17:20:21,970 INFO sqlalchemy.engine.base.Engine () [\u0026lt;User(1, name: kaka Lin, age: 28, H: 175, W: 68, city: Taipei)\u0026gt;, \u0026lt;User(2, name: kiwi Li, age: 30, H: 173, W: 70, city: Taipei)\u0026gt;] SQLAlchemy ORM - Applying Filter: SQL WHERE user_4 = User(4, 'Albert', 'Lin', 28, 160, 70, 'Taipei') user_5 = User(5, 'Andy', 'Wei', 24, 175, 72, 'Teipei') user_6 = User(6, 'kevin','Wang', 30, 174, 63, 'San Francisco') user_7 = User(7, 'kevin', 'Wei', 27, 178, 65, 'Taipei') user_8 = User(8, 'David','Kang', 26, 175, 65, 'Washington') user_9 = User(9, 'Matt','Wang', 26, 172, 72, 'Taipei') user_10 = User(10, 'kaka-ideal', 'Lin', 28, 178, 70, 'Janpan') session.add_all([ user_4, user_5, user_6, user_7, user_8, user_9, user_10, ]) session.commit() 2020-05-08 17:20:22,049 INFO sqlalchemy.engine.base.Engine INSERT INTO user (id, firstname, lastname, age, height, weight, city) VALUES (%s, %s, %s, %s, %s, %s, %s) 2020-05-08 17:20:22,050 INFO sqlalchemy.engine.base.Engine ((4, 'Albert', 'Lin', 28, 160, 70, 'Taipei'), (5, 'Andy', 'Wei', 24, 175, 72, 'Teipei'), (6, 'kevin', 'Wang', 30, 174, 63, 'San Francisco'), (7, 'kevin', 'Wei', 27, 178, 65, 'Taipei'), (8, 'David', 'Kang', 26, 175, 65, 'Washington'), (9, 'Matt', 'Wang', 26, 172, 72, 'Taipei'), (10, 'kaka-ideal', 'Lin', 28, 178, 70, 'Janpan')) 2020-05-08 17:20:22,095 INFO sqlalchemy.engine.base.Engine COMMIT session.query(User).all() 2020-05-08 17:20:22,182 INFO sqlalchemy.engine.base.Engine BEGIN (implicit) 2020-05-08 17:20:22,187 INFO sqlalchemy.engine.base.Engine SELECT user.id AS user_id, user.firstname AS user_firstname, user.lastname AS user_lastname, user.age AS user_age, user.height AS user_height, user.weight AS user_weight, user.city AS user_city FROM user 2020-05-08 17:20:22,188 INFO sqlalchemy.engine.base.Engine () [\u0026lt;User(1, name: kaka Lin, age: 28, H: 175, W: 68, city: Taipei)\u0026gt;, \u0026lt;User(2, name: kiwi Li, age: 30, H: 173, W: 70, city: Taipei)\u0026gt;, \u0026lt;User(4, name: Albert Lin, age: 28, H: 160, W: 70, city: Taipei)\u0026gt;, \u0026lt;User(5, name: Andy Wei, age: 24, H: 175, W: 72, city: Teipei)\u0026gt;, \u0026lt;User(6, name: kevin Wang, age: 30, H: 174, W: 63, city: San Francisco)\u0026gt;, \u0026lt;User(7, name: kevin Wei, age: 27, H: 178, W: 65, city: Taipei)\u0026gt;, \u0026lt;User(8, name: David Kang, age: 26, H: 175, W: 65, city: Washington)\u0026gt;, \u0026lt;User(9, name: Matt Wang, age: 26, H: 172, W: 72, city: Taipei)\u0026gt;, \u0026lt;User(10, name: kaka-ideal Lin, age: 28, H: 178, W: 70, city: Janpan)\u0026gt;] results = session.query(User).filter(User.age == 28) for row in results: print(row) 2020-05-08 17:20:22,299 INFO sqlalchemy.engine.base.Engine SELECT user.id AS user_id, user.firstname AS user_firstname, user.lastname AS user_lastname, user.age AS user_age, user.height AS user_height, user.weight AS user_weight, user.city AS user_city FROM user WHERE user.age = %s 2020-05-08 17:20:22,316 INFO sqlalchemy.engine.base.Engine (28,) \u0026lt;User(1, name: kaka Lin, age: 28, H: 175, W: 68, city: Taipei)\u0026gt; \u0026lt;User(4, name: Albert Lin, age: 28, H: 160, W: 70, city: Taipei)\u0026gt; \u0026lt;User(10, name: kaka-ideal Lin, age: 28, H: 178, W: 70, city: Janpan)\u0026gt; SQLAlchemy ORM - Filter Operators SQLAlchemy ORM - Filter Operators\nAND results = session.query(User).filter(User.age == 28, User.height \u0026gt; 170) for row in results: print(row) 2020-05-08 17:20:22,411 INFO sqlalchemy.engine.base.Engine SELECT user.id AS user_id, user.firstname AS user_firstname, user.lastname AS user_lastname, user.age AS user_age, user.height AS user_height, user.weight AS user_weight, user.city AS user_city FROM user WHERE user.age = %s AND user.height \u0026gt; %s 2020-05-08 17:20:22,414 INFO sqlalchemy.engine.base.Engine (28, 170) \u0026lt;User(1, name: kaka Lin, age: 28, H: 175, W: 68, city: Taipei)\u0026gt; \u0026lt;User(10, name: kaka-ideal Lin, age: 28, H: 178, W: 70, city: Janpan)\u0026gt; OR from sqlalchemy import or_ results = session.query(User).filter(or_(User.age == 28, User.height \u0026gt; 170)) for row in results: print(row) 2020-05-08 17:20:22,485 INFO sqlalchemy.engine.base.Engine SELECT user.id AS user_id, user.firstname AS user_firstname, user.lastname AS user_lastname, user.age AS user_age, user.height AS user_height, user.weight AS user_weight, user.city AS user_city FROM user WHERE user.age = %s OR user.height \u0026gt; %s 2020-05-08 17:20:22,497 INFO sqlalchemy.engine.base.Engine (28, 170) \u0026lt;User(1, name: kaka Lin, age: 28, H: 175, W: 68, city: Taipei)\u0026gt; \u0026lt;User(2, name: kiwi Li, age: 30, H: 173, W: 70, city: Taipei)\u0026gt; \u0026lt;User(4, name: Albert Lin, age: 28, H: 160, W: 70, city: Taipei)\u0026gt; \u0026lt;User(5, name: Andy Wei, age: 24, H: 175, W: 72, city: Teipei)\u0026gt; \u0026lt;User(6, name: kevin Wang, age: 30, H: 174, W: 63, city: San Francisco)\u0026gt; \u0026lt;User(7, name: kevin Wei, age: 27, H: 178, W: 65, city: Taipei)\u0026gt; \u0026lt;User(8, name: David Kang, age: 26, H: 175, W: 65, city: Washington)\u0026gt; \u0026lt;User(9, name: Matt Wang, age: 26, H: 172, W: 72, city: Taipei)\u0026gt; \u0026lt;User(10, name: kaka-ideal Lin, age: 28, H: 178, W: 70, city: Janpan)\u0026gt; IN results = session.query(User).filter(User.age.in_([28, 26])) for row in results: print(row) 2020-05-08 17:20:22,578 INFO sqlalchemy.engine.base.Engine SELECT user.id AS user_id, user.firstname AS user_firstname, user.lastname AS user_lastname, user.age AS user_age, user.height AS user_height, user.weight AS user_weight, user.city AS user_city FROM user WHERE user.age IN (%s, %s) 2020-05-08 17:20:22,579 INFO sqlalchemy.engine.base.Engine (28, 26) \u0026lt;User(1, name: kaka Lin, age: 28, H: 175, W: 68, city: Taipei)\u0026gt; \u0026lt;User(4, name: Albert Lin, age: 28, H: 160, W: 70, city: Taipei)\u0026gt; \u0026lt;User(8, name: David Kang, age: 26, H: 175, W: 65, city: Washington)\u0026gt; \u0026lt;User(9, name: Matt Wang, age: 26, H: 172, W: 72, city: Taipei)\u0026gt; \u0026lt;User(10, name: kaka-ideal Lin, age: 28, H: 178, W: 70, city: Janpan)\u0026gt; LIKE results = session.query(User).filter(User.city.like('%pei')) for row in results: print(row) 2020-05-08 17:20:22,641 INFO sqlalchemy.engine.base.Engine SELECT user.id AS user_id, user.firstname AS user_firstname, user.lastname AS user_lastname, user.age AS user_age, user.height AS user_height, user.weight AS user_weight, user.city AS user_city FROM user WHERE user.city LIKE %s 2020-05-08 17:20:22,644 INFO sqlalchemy.engine.base.Engine ('%pei',) \u0026lt;User(1, name: kaka Lin, age: 28, H: 175, W: 68, city: Taipei)\u0026gt; \u0026lt;User(2, name: kiwi Li, age: 30, H: 173, W: 70, city: Taipei)\u0026gt; \u0026lt;User(4, name: Albert Lin, age: 28, H: 160, W: 70, city: Taipei)\u0026gt; \u0026lt;User(5, name: Andy Wei, age: 24, H: 175, W: 72, city: Teipei)\u0026gt; \u0026lt;User(7, name: kevin Wei, age: 27, H: 178, W: 65, city: Taipei)\u0026gt; \u0026lt;User(9, name: Matt Wang, age: 26, H: 172, W: 72, city: Taipei)\u0026gt; SQLAlchemy ORM - Clossing Session Closes current session by clearing all items and ending any transaction in progress\nsession.close() 2020-05-08 17:20:22,729 INFO sqlalchemy.engine.base.Engine ROLLBACK Drop Table User.__table__.drop(engine) 2020-05-08 17:20:22,794 INFO sqlalchemy.engine.base.Engine DROP TABLE user 2020-05-08 17:20:22,795 INFO sqlalchemy.engine.base.Engine () 2020-05-08 17:20:22,853 INFO sqlalchemy.engine.base.Engine COMMIT Drop Database If we want to drop DB in SQLite, just delete the file.\n!rm -rf test.db !ls -al total 80 drwxr-xr-x 5 kakalin staff 160 May 8 17:19 \u001b[1m\u001b[36m.\u001b[m\u001b[m drwxr-xr-x 11 kakalin staff 352 May 6 15:51 \u001b[1m\u001b[36m..\u001b[m\u001b[m drwxr-xr-x 3 kakalin staff 96 May 8 13:56 \u001b[1m\u001b[36m.ipynb_checkpoints\u001b[m\u001b[m -rw-r--r-- 1 kakalin staff 264 May 8 14:10 README.md -rw-r--r-- 1 kakalin staff 33194 May 8 17:19 sqlalchemy-basics.ipynb ","id":24,"section":"posts","summary":"SQLAlchemy - basics SQLAlchemy - Tutorial import sqlalchemy from sqlalchemy import create_engine, Table from sqlalchemy.ext.declarative import declarative_base from sqlalchemy import Column, ForeignKey, Integer, String, Numeric from sqlalchemy.orm import sessionmaker sqlalchemy.__version__ Connect Database # SQLite #connect_db = 'sqlite:///test.db' # MySQL connect_db = 'mysql+mysqldb://root:\u0026lt;passwd\u0026gt;@35.201.196.222/kaka_test' ''' create_engine 此時只有建立SQLAlchemy Engine instance(","tags":["SQLAlchemy"],"title":"[DB] Sqlalchemy Basics","uri":"https://kaka-lin.github.io/my-blog/2020/06/sqlalchemy-basics/","year":"2020"},{"content":"SQLite - Basics SQL - Tutorial SQL As Understood By SQLite(官網) SQLite - Tutorial Load ipython-sql ipython-sql:\n是jupyter notebook的extension，用來擴充jupyter對SQL的支援 其底層是使用SQLAlchemy %load_ext sql Create Database The concept of creating or dropping a database is not meant for an embedded database engine like SQLite.\nIf you want to create DB in SQLite, just from the command line: sqlite3 databasefilename.\nFor example: sqlite3 test.db\nCreate DB in Jupyter Because ipython-sql is based on SQLAlchemy, we can create and connect DB as follow:\n%sql sqlite:///test.db !ls -al total 32 drwxr-xr-x 3 kaka kaka 4096 5月 14 10:16 . drwxr-xr-x 7 kaka kaka 4096 5月 14 09:49 .. drwxr-xr-x 2 kaka kaka 4096 5月 14 09:52 .ipynb_checkpoints -rw-r--r-- 1 kaka kaka 422 5月 14 09:25 README.md -rw-r--r-- 1 kaka kaka 15267 5月 14 10:16 sqlite-basics.ipynb -rw-r--r-- 1 kaka kaka 0 5月 14 10:16 test.db SQLite Version %sql SELECT sqlite_version() AS 'SQLite Version'; * sqlite:///test.db Done. | SQLite Version | | 3.31.1 | Create Table SQLite - Data Type SQLite - AUTOINCREMENT %%sql CREATE TABLE persons( person_id INTEGER PRIMARY KEY AUTOINCREMENT, firstname VARCHAR(255), lastname VARCHAR(255), age INTEGER, height REAL, weight REAL, city VARCHAR(255) ); * sqlite:///test.db Done. [] CRUD for Data C: Create R: Read U: Update D: Delete Create Data: SQL INSERT INTO %%sql INSERT INTO persons VALUES (10, 'kaka','Lin', 28, 175, 70, 'Taipei'); INSERT INTO persons (firstname, lastname, age, height, weight, city) VALUES ('kiwi','Li', 30, 173, 70, 'Taipei'); * sqlite:///test.db 1 rows affected. 1 rows affected. [] Read Data: SQL SELECT %%sql SELECT * FROM persons; * sqlite:///test.db Done. person_id firstname lastname age height weight city 10 kaka Lin 28 175.0 70.0 Taipei 11 kiwi Li 30 173.0 70.0 Taipei Update Data: SQL UPDATE %%sql UPDATE persons SET weight = 68 WHERE firstname = 'kaka'; -- or WHERE person_id = 1; * sqlite:///test.db 1 rows affected. 0 rows affected. [] %%sql SELECT * FROM persons; * sqlite:///test.db Done. person_id firstname lastname age height weight city 10 kaka Lin 28 175.0 68.0 Taipei 11 kiwi Li 30 173.0 70.0 Taipei Delete Data: SQL DELETE Before we delete data, we first add the data that we want to delete.\n%%sql INSERT INTO persons VALUES (3, 'albert','Lin', 28, 180, 70, 'Taipei'); * sqlite:///test.db 1 rows affected. [] %%sql SELECT * FROM persons; * sqlite:///test.db Done. person_id firstname lastname age height weight city 3 albert Lin 28 180.0 70.0 Taipei 10 kaka Lin 28 175.0 68.0 Taipei 11 kiwi Li 30 173.0 70.0 Taipei %%sql DELETE FROM persons WHERE person_id = 3; * sqlite:///test.db 1 rows affected. [] %%sql SELECT * FROM persons; * sqlite:///test.db Done. person_id firstname lastname age height weight city 10 kaka Lin 28 175.0 68.0 Taipei 11 kiwi Li 30 173.0 70.0 Taipei SQL WHERE %%sql INSERT INTO persons (firstname, lastname, age, height, weight, city) VALUES ('Albert', 'Lin', 28, 160, 70, 'Taipei'), ('Andy', 'Wei', 24, 175, 72, 'Teipei'), ('kevin', 'Wang', 30, 174, 63, 'San Francisco'), ('kevin', 'Wei', 27, 178, 65, 'Taipei'), ('David', 'Kang', 26, 175, 65, 'Washington'), ('Matt', 'Wang', 26, 172, 72, 'Taipei'), ('kaka-ideal', 'Lin', 28, 178, 70, 'Janpan'); * sqlite:///test.db 7 rows affected. [] %%sql SELECT * FROM persons * sqlite:///test.db Done. person_id firstname lastname age height weight city 10 kaka Lin 28 175.0 68.0 Taipei 11 kiwi Li 30 173.0 70.0 Taipei 12 Albert Lin 28 160.0 70.0 Taipei 13 Andy Wei 24 175.0 72.0 Taipei 14 kevin Wang 30 174.0 63.0 San Francisco 15 kevin Wei 27 178.0 65.0 Taipei 16 David Kang 26 175.0 65.0 Washington 17 Matt Wang 26 172.0 72.0 Taipei 18 kaka-ideal Lin 28 178.0 70.0 Janpan %%sql SELECT * FROM persons WHERE age = 28; * sqlite:///test.db Done. person_id firstname lastname age height weight city 10 kaka Lin 28 175.0 68.0 Taipei 12 Albert Lin 28 160.0 70.0 Taipei 18 kaka-ideal Lin 28 173.0 70.0 Janpan SQL AND, OR and NOT AND %%sql SELECT * FROM persons WHERE age = 28 AND height \u0026gt; 170; * sqlite:///test.db Done. person_id firstname lastname age height weight city 10 kaka Lin 28 175.0 68.0 Taipei 18 kaka-ideal Lin 28 178.0 70.0 Janpan OR %%sql SELECT * FROM persons WHERE age = 28 OR height \u0026gt; 170; * sqlite:///test.db Done. person_id firstname lastname age height weight city 10 kaka Lin 28 175.0 68.0 Taipei 11 kiwi Li 30 173.0 70.0 Taipei 12 Albert Lin 28 160.0 70.0 Taipei 13 Andy Wei 24 175.0 72.0 Taipei 14 kevin Wang 30 174.0 63.0 San Francisco 15 kevin Wei 27 178.0 65.0 Taipei 16 David Kang 26 175.0 65.0 Washington 17 Matt Wang 26 172.0 72.0 Taipei 18 kaka-ideal Lin 28 178.0 70.0 Janpan SQL IN Operator The IN operator allows you to specify multiple values in a WHERE clause.\n%%sql SELECT * FROM persons WHERE age = 28 OR age = 26; * sqlite:///test.db Done. person_id firstname lastname age height weight city 10 kaka Lin 28 175.0 68.0 Taipei 12 Albert Lin 28 160.0 70.0 Taipei 16 David Kang 26 175.0 65.0 Washington 17 Matt Wang 26 172.0 72.0 Taipei 18 kaka-ideal Lin 28 178.0 70.0 Janpan %%sql SELECT * FROM persons WHERE age IN (26, 28); * sqlite:///test.db Done. person_id firstname lastname age height weight city 10 kaka Lin 28 175.0 68.0 Taipei 12 Albert Lin 28 160.0 70.0 Taipei 16 David Kang 26 175.0 65.0 Washington 17 Matt Wang 26 172.0 72.0 Taipei 18 kaka-ideal Lin 28 178.0 70.0 Janpan NOT %%sql SELECT * FROM persons /* WHERE NOT age = 28; */ WHERE age != 28; * sqlite:///test.db Done. person_id firstname lastname age height weight city 11 kiwi Li 30 173.0 70.0 Taipei 13 Andy Wei 24 175.0 72.0 Taipei 14 kevin Wang 30 174.0 63.0 San Francisco 15 kevin Wei 27 178.0 65.0 Taipei 16 David Kang 26 175.0 65.0 Washington 17 Matt Wang 26 172.0 72.0 Taipei SQL ORDER BY SELECT column1, column2, ... FROM table_name ORDER BY column1, column2, ... ASC|DESC; Default: ASC %%sql SELECT * FROM persons ORDER BY age; * sqlite:///test.db Done. person_id firstname lastname age height weight city 13 Andy Wei 24 175.0 72.0 Taipei 16 David Kang 26 175.0 65.0 Washington 17 Matt Wang 26 172.0 72.0 Taipei 15 kevin Wei 27 178.0 65.0 Taipei 10 kaka Lin 28 175.0 68.0 Taipei 12 Albert Lin 28 160.0 70.0 Taipei 18 kaka-ideal Lin 28 178.0 70.0 Janpan 11 kiwi Li 30 173.0 70.0 Taipei 14 kevin Wang 30 174.0 63.0 San Francisco SQL LIKE Operator The LIKE operator is used in a WHERE clause to search for a specified pattern in a column.\nThere are two wildcards often used in conjunction with the LIKE operator:\n% : The percent sign represents zero, one, or multiple characters _ : The underscore represents a single character %%sql SELECT * FROM persons WHERE city LIKE '%pei%'; * sqlite:///test.db Done. person_id firstname lastname age height weight city 10 kaka Lin 28 175.0 68.0 Taipei 11 kiwi Li 30 173.0 70.0 Taipei 12 Albert Lin 28 160.0 70.0 Taipei 13 Andy Wei 24 175.0 72.0 Taipei 15 kevin Wei 27 178.0 65.0 Taipei 17 Matt Wang 26 172.0 72.0 Taipei SQLite - Functions SQLite Core Function Modify Table: SQL ALTER TABLE Add a new column in an existing table\nALTER TABLE table_name ADD column_name datatype; %%sql ALTER TABLE persons ADD height_meters REAL; UPDATE persons SET height_meters = round(height / 100, 2); SELECT * FROM persons; * sqlite:///test.db Done. 9 rows affected. Done. person_id firstname lastname age height weight city height_meters 10 kaka Lin 28 175.0 68.0 Taipei 1.75 11 kiwi Li 30 173.0 70.0 Taipei 1.73 12 Albert Lin 28 160.0 70.0 Taipei 1.6 13 Andy Wei 24 175.0 72.0 Taipei 1.75 14 kevin Wang 30 174.0 63.0 San Francisco 1.74 15 kevin Wei 27 178.0 65.0 Taipei 1.78 16 David Kang 26 175.0 65.0 Washington 1.75 17 Matt Wang 26 172.0 72.0 Taipei 1.72 18 kaka-ideal Lin 28 178.0 70.0 Janpan 1.78 Drop Table %%sql DROP TABLE persons; * sqlite:///test.db Done. [] Drop Database If we want to drop DB in SQLite, just delete the file.\n!rm -rf test.db !ls -al total 32 drwxr-xr-x 3 kaka kaka 4096 5月 14 10:16 . drwxr-xr-x 7 kaka kaka 4096 5月 14 09:49 .. drwxr-xr-x 2 kaka kaka 4096 5月 14 09:52 .ipynb_checkpoints -rw-r--r-- 1 kaka kaka 422 5月 14 09:25 README.md -rw-r--r-- 1 kaka kaka 15267 5月 14 10:16 sqlite-basics.ipynb ","id":25,"section":"posts","summary":"SQLite - Basics SQL - Tutorial SQL As Understood By SQLite(官網) SQLite - Tutorial Load ipython-sql ipython-sql: 是jupyter notebook的extension，用來擴充jupyter對SQL的支","tags":["SQLite"],"title":"[DB] Sqlite Basics","uri":"https://kaka-lin.github.io/my-blog/2020/06/sqlite-basics/","year":"2020"},{"content":"GitLab CI/CD GitLab CI/CD How GitLab CI/CD works Getting started with GitLab CI/CD 1. Build a Project 2. Configuring GitLab Runners 2-1. Use Shared Runners 2-2. Set up a Specific Runners Exmaple with Docker 2-3. Introduction to Shared, Specific and Group Runners [Optional] 3. Creating a .gitlab-ci.yml file 4. Results GitLab CI/CD is a powerful tool built into GitLab that allows you to apply all the continuous methods to your software with no third-party application or integration needed.\nContinuous Integration (CI): 持續整合 Continuous Delivery (CD): 持續交付 Continuous Deployment (CD): 持續發佈 How GitLab CI/CD works GitLab offers a continuous integration service. For each commit or push to trigger your CI pipeline, you must:\nAdd a .gitlab-ci.yml file to your repository\u0026rsquo;s root directory. Ensure your project is configured to use a Runner. The .gitlab-ci.yml file tells the GitLab Runner what to do. For example:\nbuild stage test stage deploy stage Getting started with GitLab CI/CD Requirement:\nA working GitLab instance of version 8.0+ or are using GitLab.com 1. Build a Project Create a project in GitLab. See the Example.\n2. Configuring GitLab Runners In GitLab CI/CD, Runners run the jobs that you defined in .gitlab-ci.yml.\nA Runner can be a virtual machine, a VPS, a bare-metal machine, a docker container or even a cluster of containera.\nGitLab and the Runners communicate through an API, so the only requirement is that the Runner's machine has network access to the GitLab server. There are three types of Runners::\nShared Runners Specific Runners Group Runners 如果只是用來做一般測試，且沒有多餘的機器來當Runner，可以使用GitLab所提供的Shared Runner就好。 但當工作流程需要一些特別的驗證，或是可能需要運行某些套件或library或模組時，建議使用Specific Runners. 如果使用Shared Runner，每次在測試前都需要花時間配置所需的套件。 2-1. Use Shared Runners If you use GitLab.com you can use the Shared Runners provided by GitLab Inc.\nThese are special virtual machines that run on GitLab\u0026rsquo;s infrastructure and can be build any project. To enable the Shared Runners you have to go to your projects; Setting -\u0026gt; CI/CD and click Enable shared Runners, as below:\nShared Runners are enable by default as of GitLab 8.2, but can be disabled with the Disable shared Runners button which is present under each project's Setting -\u0026gt; CI/CD page. Read more on Shared Runners\n2-2. Set up a Specific Runners If you want to set a specific Runners, you need to follow two steps:\nInstall GitLab Runner\nGitLab Runner can be installed and used on GNU/Linux, macOS, FreeBSD and Windows. There are three ways to install it, as below:\nRepository for rpm/deb packages Binaries for CNU/Linux, maxOS, Windows, FreeBSD Docker or Kubernetes Ideally, the GitLab Runner should not be installed on the same machine as GitLab. Configure it.\nExmaple with Docker Install GitLab Runner Docker image.\n# docker pull $ docker pull gitlab/gitlab-runner:latest # docker run on macOS $ docker run -d --name gitlab-runner --restart always \\ -v /var/run/docker.sock:/var/run/docker.sock \\ -v /Users/Shared/gitlab-runner/config:/etc/gitlab-runner \\ gitlab/gitlab-runner:latest Registering Runners\nRegistering a Runner is the process that binds the Runner with a GitLab instance.\n$ docker run --rm -t -i -v /Users/Shared/gitlab-runner/config:/etc/gitlab-runner gitlab/gitlab-runner register You need to your repo\u0026rsquo;s URL and token, like:\nIf registering runner succeeded, you will see the status like:\nNote 1:\nYou need to tick the Run untagged jobs checkbox for fix the issue of \u0026quot;Job is stuck in the pending state even a runner has been enabled for the project\u0026quot;.\nNote 2:\nDisable shared Runners\n2-3. Introduction to Shared, Specific and Group Runners [Optional] A Runner can be specific to a certain project or server any project in GitLab CI/CD.\nShared Runners:\nShared Runners are useful for jobs that have similar requirements, between multiple projects.\nRather than having multiple Runners idling for many projects, you can have a single or a small number of Runners that handle multiple projects. This makes it easier to maintain and update them.\nShared Runners process jobs using a fair usage queue. In contrast to specific Runners that use a FIFO queue, this prevents cases where projects create hundreds of jobs which can lead to eating all available shared Runners resources.\nA Runner that serves all projects is called a Shared Runner. Specific Runners:\nSpecific Runners are useful for jobs that have special requirements or for projects with a specific demand.\nIf a job has certain requirements, you can set up the specific Runner with this in mind, while not having to do this for all Runners.\nFor example, if you want to deploy a certain project, you can set up a specific Runner to have the right credentials for this. The usage of tags may be useful in this case. Specific Runners process jobs using a FIFO queue.\nGroup Runners:\nGroup Runners are useful when you have multiple projects under one group and would like all projects to have access to a set of Runners.\nGroup Runners process jobs using a FIFO queue. 3. Creating a .gitlab-ci.yml file Creating a file named .gitlab-ci.yml in the root directory of your repository, like:\nbefore_script: - apt-get install python run-test: script: - python --version 4. Results Pipelines\nPipelines -\u0026gt; Jobs\nLog of that job\nShared Runners\nSpecific Runners\n","id":26,"section":"posts","summary":"GitLab CI/CD GitLab CI/CD How GitLab CI/CD works Getting started with GitLab CI/CD 1. Build a Project 2. Configuring GitLab Runners 2-1. Use Shared Runners 2-2. Set up a Specific Runners Exmaple with Docker 2-3. Introduction to Shared, Specific and Group Runners [Optional] 3. Creating a .gitlab-ci.yml file 4. Results GitLab CI/CD is a powerful tool built into GitLab that allows you to apply all the continuous methods to your","tags":["CI/CD Tools"],"title":"[DevOps] Gitlab CI/CD","uri":"https://kaka-lin.github.io/my-blog/2020/06/gitlab_ci_cd/","year":"2020"},{"content":"Get and Analysis the result of Google Trends with Python Google Trends (Google搜尋趨勢) 是由Google 提供的線上搜尋趨勢服務，可以簡單的看出最近哪些關鍵字是熱門的。 但大規模分析 Google Trends 是很麻煩不切實際的，且有時候連打開網頁都懶， 那麼我們如何才能有夠有效的使用Google Trends呢？\npytrends:\nUnofficial API for Google Trends\nAllows simple interface for automating downloading of reports from Google Trends. Only good until Google changes their backend again :-P. When that happens feel free to contribute! 這是一個非官方支援的API，允許從Google Trends下載資料（爬蟲）\nInstall pytrends package !pip3 install pytrends Connect to Google Pandas:\nPython Data Analysis Library\nimport pandas as pd from pytrends.request import TrendReq pytrend = TrendReq() Build Payload 設定我們想要搜尋的關鍵字、類別、時間區段、地區以及類型\n\u0026quot;\u0026quot;\u0026quot;Create the payload for related queries, interest over time anf interest by region\u0026quot;\u0026quot;\u0026quot; TrendReq.build_payload(self, kw_list, cat=0, timeframe='today 5-y', geo='', gprop='') Parameters: kw_list: keywords to get data for Up to five terms in a list (最多五個) timeframe: Date to start from cat: Category to narrow resulta geo: Two letter country abbreviation gprop: What Google property to filter to kw_list=['tea', 'coffe', 'coke', 'milk', 'water'] # timeframe=today 12-m': one year data # geo='US': specifying location with U.S. pytrend.build_payload(kw_list, timeframe='today 12-m', geo='TW') # gprop=yputube: only want to see Youtube search trends #pytrend.build_payload(kw_list, timeframe='today 12-m', geo='TW', gprop=youtube) # cat=71: category #pytrend.build_payload(kw_list, timeframe='today 12-m', geo='TW', gprop=youtube, cat=71) Request data (Get results) Interest Over Time Historical Hourly Interest Interest by REgion Related Topics Related Queries Trending Searches Top Charts Suggestions Interest Over Time \u0026quot;\u0026quot;\u0026quot;Request data from Google's Interest Over Time section and return a dataframe\u0026quot;\u0026quot;\u0026quot; TrendReq.interest_over_time(self) Returns: pandas.Dataframe interest_over_time_df = pytrend.interest_over_time() interest_over_time_df.head() Plot the result Matplotlib seaborn Matplotlib 顯示中文請參考：\nWindows Mac Ubuntu #!pip3 install matplotlib seaborn import matplotlib import matplotlib.pyplot as plt import seaborn as sns sns.set(color_codes=True) plt.style.use('fivethirtyeight') # 中文 plt.rcParams['font.sans-serif'] = ['Noto Sans Mono CJK TC', 'sans-serif'] plt.rcParams['axes.unicode_minus'] = False %matplotlib inline Make plots of DataFrame using Matplotlib plot lines:\nDataFrame.plot.line(self, x=None, y=None, **kwargs) axes = interest_over_time_df.plot.line( figsize=(15,7), title='Interest Over Time') axes.set_xlabel('Date') axes.set_ylabel('Trends Index') axes.tick_params(axis='both', which='major', labelsize=13) Google Keyword Suggestions Return a list of additional suggested keywords that can be used to refine a trend search.\n\u0026quot;\u0026quot;\u0026quot;Request data from Google's Keyword Suggestions dropdown and return a dictionary\u0026quot;\u0026quot;\u0026quot; TrendReq.suggestions(self, keyword) Parameters: keyword: keyword to get suggestions for keywords = pytrend.suggestions(keyword='beer') keywords_df = pd.DataFrame(keywords) keywords_df.drop(columns='mid') # This column makes no sense Related Queries 當使用者搜尋某個主題時，他們也會搜尋相關的內容\nReturn data for the related keywords to a provided keyword shown on Google Trends\u0026rsquo; Related Queries section.\n\u0026quot;\u0026quot;\u0026quot;Request data from Google's Related Queries section and reutrn a dictionary of dataframe If not top and/or rising related queries are found, the value for the key \u0026quot;top\u0026quot; and/or \u0026quot;rising\u0026quot; will be None \u0026quot;\u0026quot;\u0026quot; TrendReq.related_queries(self) Returns: dictionary of pandas.DataFrames pytrend.build_payload(kw_list=['Coronavirus']) # Related Queries, return a dictionary of dataframe related_queries = pytrend.related_queries() related_queries {'Coronavirus': {'top': query value 0 taiwan coronavirus 100 1 taiwan 94 2 coronavirus update 64 3 coronavirus cases 52 4 coronavirus 中文 37 5 thank you coronavirus helpers 33 6 coronavirus news 31 7 corona 28 8 coronavirus us 27 9 coronavirus map 26 10 武漢 肺炎 26 11 china coronavirus 24 12 coronavirus tips 21 13 world coronavirus 20 14 coronavirus live 17 15 coronavirus usa 17 16 疫情 15 17 new coronavirus 15 18 coronavirus in taiwan 14 19 wuhan coronavirus 14 20 coronavirus worldometer 13 21 taiwan coronavirus cases 13 22 italy coronavirus 13 23 coronavirus symptoms 13 24 corona virus 13, 'rising': query value 0 taiwan coronavirus 806850 1 taiwan 760150 2 coronavirus update 520350 3 coronavirus cases 421850 4 thank you coronavirus helpers 264250 5 coronavirus us 217300 6 coronavirus map 210350 7 武漢 肺炎 207400 8 china coronavirus 190500 9 coronavirus tips 167400 10 world coronavirus 161150 11 coronavirus usa 135500 12 疫情 121000 13 coronavirus in taiwan 113550 14 wuhan coronavirus 111450 15 coronavirus worldometer 107600 16 taiwan coronavirus cases 105500 17 italy coronavirus 104450 18 coronavirus italy 100450 19 taiwan news coronavirus 96200 20 who coronavirus 95600 21 covid 94100 22 taiwan news 91750 23 who 87750 24 coronavirus uk 87600}} COVID_19 = related_queries['Coronavirus']['top'] COVID_19 axes = COVID_19.plot.barh(x='query', y='value', figsize=(10,15)) The Search Trends of COVID-19 in 2020 pytrend.build_payload(kw_list=['Coronavirus'], timeframe='2020-01-01 2020-06-04') covid_19_interest_over_time_df = pytrend.interest_over_time() covid_19_interest_over_time_df.head() axes = covid_19_interest_over_time_df.plot.line( figsize=(20,5), title='The Search Trends of COVID-19 in 2020') axes.set_yticks([0, 25, 50, 75, 100]) axes.set_xlabel('Date') axes.set_ylabel('Trends Index') axes.tick_params(axis='both', which='major', labelsize=13) ","id":27,"section":"posts","summary":"Get and Analysis the result of Google Trends with Python Google Trends (Google搜尋趨勢) 是由Google 提供的線上搜尋趨勢服務，可以簡單的看出最近哪些關鍵字是熱門的。 但大規模分析 Google","tags":["Google Trends"],"title":"[DS] Google Trends 01: Operate with Python","uri":"https://kaka-lin.github.io/my-blog/2020/06/01_google_trends_and_python/","year":"2020"},{"content":"Google Trends to Google Data Studio Get the result form Google Trends Using gspread transform the data of Google Trends to Google Sheets Import the file of Google Sheets into Google Data Studio Get the result from Goolge Trends import pandas as pd from pytrends.request import TrendReq # Create an instance(實例) of TrendReq pytrend = TrendReq() # Build a payload pytrend.build_payload(kw_list=['Coronavirus'], timeframe='2020-01-01 2020-06-04') # Requset data: Interest Over Time covid_19_interest_over_time_df = pytrend.interest_over_time() covid_19_interest_over_time_df.tail() Plot the result import matplotlib import matplotlib.pyplot as plt import seaborn as sns sns.set(color_codes=True) plt.style.use('fivethirtyeight') # 中文 plt.rcParams['font.sans-serif'] = ['Noto Sans Mono CJK TC', 'sans-serif'] plt.rcParams['axes.unicode_minus'] = False %matplotlib inline axes = covid_19_interest_over_time_df.plot.line( figsize=(20,5), title='The Search Trends of COVID-19 in 2020') axes.set_yticks([0, 25, 50, 75, 100]) axes.set_xlabel('Date') axes.set_ylabel('Trends Index') axes.tick_params(axis='both', which='major', labelsize=13) Using gspread transform the data of Google Trends to Google Sheets Reference: Access spreadsheets via Google Sheets API.\nInstall the required packages gspread oauth2client !pip3 install gspread oauth2client 申請帳號並啟用API 因為我們要存取 Google sheets， 所以我們必須打開原本Google帳號的權限（或是申請一個新的帳號）\n到 Google Cloud Platform 建立一個Project\n新增專案 -\u0026gt; 專案名稱:google-sheets -\u0026gt; 建立\n啟動該Project的 API\n啟用API和服務 -\u0026gt; 在搜尋API和服務打上Drive API -\u0026gt; 啟用 -\u0026gt; 在搜尋API和服務打上Sheets API(Google Sheets) -\u0026gt; 啟用\n建立憑證(Credentials)\n回到首頁點選憑證 -\u0026gt; 建立憑證 -\u0026gt; 選服務帳號 -\u0026gt; 服務帳號詳細資料：Google Trends to Google Sheets -\u0026gt; 建立 -\u0026gt; 繼續 -\u0026gt; 建立金鑰 -\u0026gt; 選擇 JSON -\u0026gt; 建立 -\u0026gt; 完成\n將下載好的JSON檔案取名為auth.json\n建立試算表 透過gspread建立並使用試算表有兩種方式\n在Google Drive或是Google Sheets建立試算表，並將開試算表分享給剛剛下載的JSON裡的client_email裡的帳號: name...@...gserviceaccount.com使用，並給予編輯的權限，這樣才有辦法透過程式存取。\n透過gspread的create()創建試算表\nsh = gc.create('A new spreadsheet') Note: If you’re using a service account, this new spreadsheet will be visible only to your script's account. To be able to access newly created spreadsheet from Google Sheets with your own Google account you must share it with your email. See how to share a spreadsheet in the section below. Sharing a Spreadsheet:\nsh.share('your_email', perm_type='user', role='writer') 以下使用第二種方法！\nConnect to Google Sheets import gspread from google.oauth2.service_account import Credentials def google_oauth2_service(auth_path, scopes): credentials = Credentials.from_service_account_file( auth_path, scopes=scopes ) return gspread.authorize(credentials) scopes = [ 'https://www.googleapis.com/auth/spreadsheets', 'https://www.googleapis.com/auth/drive' ] auth_path = 'google_sheets_auth.json' gc = google_oauth2_service(auth_path, scopes) Connetc and share a spreadsheet # Create a spreadsheet sh = gc.create(\u0026quot;COVID-19 Search Trends\u0026quot;) # Share a spreadsheet sh.share('vn503024@gmail.com', perm_type='user', role='writer') Select a worksheet Select worksheet by index. Worksheet indexes start from zero:\nworksheet = sh.get_worksheet(0) Or by title:\nworksheet = sh.worksheet(\u0026quot;January\u0026quot;) Or the most common case: Sheet1:\nworksheet = sh.sheet1 To get a list of all worksheets:\nworksheet_list = sh.worksheets() worksheet = gc.open(\u0026quot;COVID-19 Search Trends\u0026quot;).sheet1 Update value of cell: send DataFrame into sheet Prepocess DataFrame reset_index(): 因為我們需要date這個欄位 conver datatime to string: Object of type 'Timestamp' is not JSON serializable covid_19_interest_over_time_df covid_19_interest_over_time_df.index DatetimeIndex(['2020-01-01', '2020-01-02', '2020-01-03', '2020-01-04', '2020-01-05', '2020-01-06', '2020-01-07', '2020-01-08', '2020-01-09', '2020-01-10', ... '2020-05-24', '2020-05-25', '2020-05-26', '2020-05-27', '2020-05-28', '2020-05-29', '2020-05-30', '2020-05-31', '2020-06-01', '2020-06-02'], dtype='datetime64[ns]', name='date', length=154, freq=None) Reset index covid_19_interest_over_time_df.reset_index(inplace=True) covid_19_interest_over_time_df Convert datatime to string def convert_datetime_to_string(df): df['date'] = df['date'].dt.strftime('%Y-%m-%d %H:%M:%S') convert_datetime_to_string(covid_19_interest_over_time_df) covid_19_interest_over_time_df.head() Send DataFram into Sheet def iter_pd(df): for val in df.columns: yield val for row in df.to_numpy(): for val in row: if pd.isna(val): yield \u0026quot;\u0026quot; else: yield val def pandas_to_sheets(pandas_df, sheet, clear=True): \u0026quot;\u0026quot;\u0026quot;Update all values in a worksheet to match a pandas dataframe\u0026quot;\u0026quot;\u0026quot; if clear: sheet.clear() (row, col) = pandas_df.shape cells = sheet.range(\u0026quot;A1:{}\u0026quot;.format(gspread.utils.rowcol_to_a1(row+1, col))) for cell, val in zip(cells, iter_pd(pandas_df)): cell.value = val sheet.update_cells(cells) pandas_to_sheets(covid_19_interest_over_time_df, worksheet) Result DataFrame Google Sheets DataFrame.plot.line() Google Data Studio: 時間序列圖表 ","id":28,"section":"posts","summary":"Google Trends to Google Data Studio Get the result form Google Trends Using gspread transform the data of Google Trends to Google Sheets Import the file of Google Sheets into Google Data Studio Get the result from Goolge Trends import pandas as pd from pytrends.request import TrendReq # Create an instance(實例) of TrendReq pytrend = TrendReq() # Build a","tags":["Google Trends"],"title":"[DS] Google Trends 02: Convert to Google Data Studio","uri":"https://kaka-lin.github.io/my-blog/2020/06/02_google_trends_to_google_data_studio/","year":"2020"},{"content":"Matplotlib 顯示中文 Ref: Text with non-latin glyphs\n下載思源體（下面兩種任選一種皆可）\n思源黑體 思源宋體 Then,\nWindows Mac Ubuntu Windows 查看matplotlib套件安裝位置 import matplotlib print(matplotlib.__file__) Output:\nC:\\Users\\USER\\Miniconda3\\envs\\tensorflow\\lib\\site-packages\\matplotlib\\__init__.py 可以得知，matplotlib的安裝位置在C:\\Users\\USER\\Miniconda3\\envs\\tensorflow\\lib\\site-packages\\matplotlib。\nNote:\n每個人的安裝位置會因電腦配置而有所不同。 安裝步驟 解開剛剛下載的壓縮檔 任選一個.otf檔案，複製到C:\\Users\\USER\\Miniconda3\\envs\\tensorflow\\lib\\site-packages\\matplotlib\\mpl-data\\fonts\\ttf\\資料夾內 刪除這個資料夾內的所有檔案：C:\\Users\\USER\\\\.matplotlib\\ 如果使用的是思源黑體，請將底下的fontType =' '變更為fontType ='Noto Sans CJK TC' 如果使用的是思源宋體，請將底下的fontType =' '變更為fontType ='Noto Serif CJK TC' Configuration import matplotlib.pyplot as plt fontType = '' plt.rcParams['font.sans-serif'] = [fontType] plt.rcParams['axes.unicode_minus'] = False %matplotlib inline Plot the result plt.figure() plt.plot((1, 2, 3),(4, 3, -1)) plt.title(\u0026quot;聲量圖\u0026quot;) plt.ylabel(\u0026quot;文章數量\u0026quot;) plt.xlabel(\u0026quot;品牌名稱\u0026quot;) plt.show() Mac 查看matplotlib安裝了哪些字型 # 查看安裝了哪些字型 # windows請忽略這段 # unix系統可以使用下command確認是否安裝成功 !fc-list :lang=zh family 重新加載字體 # 重新加載字體 from matplotlib.font_manager import _rebuild _rebuild() import matplotlib import matplotlib.pyplot as plt # 使用剛剛下載的思源體字型 plt.rcParams['font.sans-serif'] = ['Noto Sans Mono CJK TC', 'sans-serif'] plt.rcParams['axes.unicode_minus'] = False %matplotlib inline Plot the result plt.figure() plt.plot((1, 2, 3),(4, 3, -1)) plt.title(\u0026quot;聲量圖\u0026quot;) plt.ylabel(\u0026quot;文章數量\u0026quot;) plt.xlabel(\u0026quot;品牌名稱\u0026quot;) plt.show() Ubuntu 查看matplotlib安裝了哪些字型 # 查看安裝了哪些字型 # windows請忽略這段 # unix系統可以使用下command確認是否安裝成功 !fc-list :lang=zh family import matplotlib import matplotlib.pyplot as plt # 使用剛剛下載的思源體字型 plt.rcParams['font.sans-serif'] = ['Noto Sans Mono CJK TC', 'sans-serif'] plt.rcParams['axes.unicode_minus'] = False %matplotlib inline Plot the result plt.figure() plt.plot((1, 2, 3),(4, 3, -1)) plt.title(\u0026quot;聲量圖\u0026quot;) plt.ylabel(\u0026quot;文章數量\u0026quot;) plt.xlabel(\u0026quot;品牌名稱\u0026quot;) plt.show() ","id":29,"section":"posts","summary":"Matplotlib 顯示中文 Ref: Text with non-latin glyphs 下載思源體（下面兩種任選一種皆可） 思源黑體 思源宋體 Then, Windows Mac Ubuntu Windows 查看matplotlib套件安裝位置 import matplotlib print(matplotlib.__file__) Output: C:\\Users\\USER\\Miniconda3\\envs\\tensorflow\\lib\\site-packages\\matplotlib\\__init__.py 可以得知，ma","tags":["Matplotlib"],"title":"[DS] Matplotlib show Chinese","uri":"https://kaka-lin.github.io/my-blog/2020/06/matplotlib_chinese/","year":"2020"},{"content":"Python Basics Interactive Shell Compiled language v.s. Interpreted language Compiled language (編譯語言)\nThrough compiler convert source code into machine code and execute it.\nC/C++ Go Rust Interpreted language (直譯語言)\nExecute the code step-by-step.\nPython JavaScript Ruby PHP Python Interactive Shell Python is a Interpreted language. It means it excutes the code line by line.\nPython provides a Python Shell (Python Interactive Shell) which is used to execute a single Python command and get the result.\nOpen terminal # or python3 $ python Then you will see the figure below Now, you can type a single statement and get the result Python Comments Comments can be used to explain code, make the code more readable.\n#: single line \u0026quot;\u0026quot;\u0026quot; \u0026quot;\u0026quot;\u0026quot;: multiple lines Examples:\n# This is a comment print('Hello world') \u0026quot;\u0026quot;\u0026quot; This is a comment written in more than just one line \u0026quot;\u0026quot;\u0026quot; print('Hello world') Python Expressions: Math Operators # Addition: Integer 2 + 3 # 5 # Addition: Floating point \u0026amp; Floating point -\u0026gt; Floating point 2.0 + 3.0 # 5.0 # Addition: Floating point \u0026amp; Integet -\u0026gt; Floating point 2.0 + 3 # 5.0 # Multiplication 3 * 2 # 6 # Exponent 2 ** 5 # 32 Exercise Suppose you have $100, which you can invets with a 10% return each year. After one year, it's 100 x 1.1 = 110 dollars, and after two years it's 100 x 1.1 x 1.1 = 121. Add code to calculate how much money you end up with after 7 years, and print the result.\n# Click below for a solution return_money = 100 * (1.1 ** 7) return_money [Out]: 194.87171000000012 Display the Output Builtin-in function print() serves as an output statement in Python.\n# type 1. print(\u0026quot;Hello World!\u0026quot;) # type 2. print(\u0026quot;Hello\u0026quot; + \u0026quot; World1\u0026quot;) # type 3. text = \u0026quot;world!\u0026quot; print(\u0026quot;Hello\u0026quot;, text) # type 4. text = \u0026quot;world!\u0026quot; print(\u0026quot;Hello {}\u0026quot;.format(text)) Hello World! Hello World1 Hello world! Hello world! Getting the User\u0026rsquo;s Input The input() function is part of the core library of standard Python distribution.\nIt reads the key strokes as a string object which can be referred to by a variable having a suitable name.\n_input = input() print(\u0026quot;input: {}, type: {}\u0026quot;.format(_input, type(_input))) 123 input: 123, type: \u0026lt;class 'str'\u0026gt; name = input(\u0026quot;Enter your name: \u0026quot;) print(\u0026quot;Welcome, {}\u0026quot;.format(name)) Enter your name: kaka Welcome, kaka Variables Variables are containers for storing data values. In order to conveniently repeatedly refer to the store value, it is given a suitable name.\nSpecific, case-sensitive name Call up value through variable name A value is bound to a name by the assignment operator =\nExample Height 1.75m, Weight 68.7kg, Calculate BMI\nheight = 1.75 weight = 68.7 bmi = weight / (height ** 2) print(\u0026quot;BMI: {}\u0026quot;.format(bmi)) Data Types Variables can store data of different types, and different types can do different things.\nA data type is a category for values, and every value belongs to exactly one data type.\nPython has the following standard or built-in data types:\nNumeric Integets (int): 1, 0, 1 Float (float): -1.25, -0.5, 0.0, 1.25 Complex (complex): 1j Boolean Data with one of two built-in values True or False.\nSequence Strings (str):\nString literals in python are surrounded by either single quotation marks, or double quotation marks.\n\u0026lsquo;Hello\u0026rsquo; is the same as \u0026ldquo;Hello\u0026rdquo;.\nExample:\na = 'Hello Wrold!' list:\nList is a collention which is ordered and changeable. Allow duplicate members.\nExample:\na = ['Hello', 'World', '!'] tuple: Tuple is a collention which is ordered and unchangeable. Allow duplicate members.\nExample:\na = ('Hello', 'World', '!') Dictionary Dictionary is a collention which is unordered, changeable and indexed. No duplicate members.\nExample:\na = {\u0026quot;name\u0026quot;: \u0026quot;kaka\u0026quot;, \u0026quot;age\u0026quot;: 28} Storing Values in Variables Assignment 在程式語言的世界裡，=代表的是指定(assignment)的意思\n例如：x = 7 就是把7這個物件指定給x這個變數，換句話說也就是把x這個變數指向(綁定)7這個物件，如下圖所示：\nx = 7 x [Out]: 7 x = 7 y = x y [Out]: 7 x = 8 print(\u0026quot;x =\u0026quot;, x, \u0026quot;y =\u0026quot;, y) [Out]: x = 8 y = 7 Pyhton Assignmes: Bindding # Fist, we see an example as below: x = [1, 2, 3] y = x x[1] = 100 print(\u0026quot;x: \u0026quot;, x) print(\u0026quot;y: \u0026quot;, y) x: [1, 100, 3] y: [1, 100, 3] Explain Python的=實際上是 binds an object reference to an object\nx = [1, 2, 3] X ----\u0026gt; [1 2 3] y = x x ---\u0026gt; [1 2 3] ^ | y ------ x[1] = 100 x ---\u0026gt; [100 2 3] ^ | y ------ Your First Program Referece: Automate the Boring Stuff with Python # This program says hello and asks for my name and age. print('Hello World!') print('What is your name?') print('------------------') name = input() print('It is good to meet you, ' + name) print('The length of your name is: ', len(name)) print('What is your age?') age = input() print('------------------') print('You will be ' + str(int(age) + 1) + ' in a year') Hello World! What is your name? ------------------ kaka It is good to meet you, kaka The length of your name is: 4 What is your age? 28 ------------------ You will be 29 in a year ","id":30,"section":"posts","summary":"Python Basics Interactive Shell Compiled language v.s. Interpreted language Compiled language (編譯語言) Through compiler convert source code into machine code and execute it. C/C++ Go Rust Interpreted language (直譯語言) Execute the code step-by-step. Python JavaScript Ruby PHP Python Interactive Shell Python is a Interpreted language. It means it excutes the code line by line. Python provides a Python Shell (Python","tags":null,"title":"[Python] Ch1: Python Basics - 01 Python Basics","uri":"https://kaka-lin.github.io/my-blog/2020/06/01_python_basics/","year":"2020"},{"content":"Flow Control Python if ... else The general syntax for Python\u0026rsquo;s if statement is this:\nif condition1: # statement1 for True condition1 elif condition2 : # statement2 for True condition2 elif condition3 : # statement3 for True condition3 else: # statements for each condition False score = int(input(\u0026quot;請輸入成績\u0026quot;)) if score \u0026gt;= 60: print(\u0026quot;成績及格!\u0026quot;) else: print(\u0026quot;不及格，被當了!\u0026quot;) 請輸入成績45 不及格，被當了! # Click below for a solution score = int(input(\u0026quot;score: \u0026quot;)) if score \u0026gt;= 90: print('Grade is: A') elif score \u0026gt;= 80: print('Grade is: B') elif score \u0026gt;= 70: print('Grade is: C') elif score \u0026gt;= 60: print('Grade is: D') else: print('Grade is: F') score: 90 Grade is: A Python for loops Python\u0026rsquo;s for loop reuses the in keyword, and has the following syntax:\nfor variable in iterable: # suite sequences = [0, 1, 2, 3, 4] for i in sequences: print(i) 0 1 2 3 4 countries = ['Denmark', 'Finland', 'Norway', 'Sweden', 'Taiwan'] for country in countries: print(country) Denmark Finland Norway Sweden Taiwan for i in range(10): print(i, end=' ') 0 1 2 3 4 5 6 7 8 9 Nested for loops # 99乘法表 for i in range(1, 10): for j in range(1, 10): if j == 9: print('\\t', i * j) else: print('\\t', i * j, end=' ') 1 2 3 4 5 6 7 8 9 2 4 6 8 10 12 14 16 18 3 6 9 12 15 18 21 24 27 4 8 12 16 20 24 28 32 36 5 10 15 20 25 30 35 40 45 6 12 18 24 30 36 42 48 54 7 14 21 28 35 42 49 56 63 8 16 24 32 40 48 56 64 72 9 18 27 36 45 54 63 72 81 Python while loops The while statement is used to execute a suite zero or more times, the number of times depending on the state of the while loop\u0026rsquo;s condition. Here\u0026rsquo;s the syntax:\nwhile boolean_expression: # Body of while i = 1 while i \u0026lt;= 10: print(i, end=' ') i += 1 1 2 3 4 5 6 7 8 9 10 break and continue # break i = 0 while True: i += 1 if i == 10: break print(i, end=' ') 1 2 3 4 5 6 7 8 9 # continue i = 0 while i \u0026lt; 10: i += 1 if i == 4: continue print(i, end=' ') 1 2 3 5 6 7 8 9 10 Exercise: Guessing Game import random number = random.randint(1, 100) print('Guess the number!') while True: print('Please enter your guess:') guess = int(input()) if guess == number: print('Good job') break elif guess \u0026lt; number: print('Your guess is too low') else: print('Your guess is too heigh') ","id":31,"section":"posts","summary":"Flow Control Python if ... else The general syntax for Python\u0026rsquo;s if statement is this: if condition1: # statement1 for True condition1 elif condition2 : # statement2 for True condition2 elif condition3 : # statement3 for True condition3 else: # statements for each condition False score = int(input(\u0026quot;請輸入成績\u0026q","tags":null,"title":"[Python] Ch1: Python Basics - 02 Flow Control","uri":"https://kaka-lin.github.io/my-blog/2020/06/02_flow_control/","year":"2020"},{"content":"List 串列 List 用來儲存一連串有順序的資料，如：\ncountries = ['Taiwan', 'Janpan', 'America'] print(countries) ['Taiwan', 'Janpan', 'America'] 取得 List 裡有幾個元素: len() length = len(countries) length [Out]: 3 取得List 裡的元素 list_name[index] countries[0] [Out]: 'Taiwan' 取得最後一個元素 list[-1] print(countries[-1]) [Out]: America list.index(x[, start[, end]]) 範圍取值: list slicing list[start_index:end_index:sep] countries[0:1] [Out]: ['Taiwan'] countries[::3] [Out]: ['Taiwan'] 增加 List 裡面的元素 append method list.append(object) 將一個新的元素加到 list 的尾端。\ncountries.append('Korea') countries ['Taiwan', 'Janpan', 'America', 'Korea'] insert method list.insert(position, object) 將一個新的元素加到指定的 list 位置。\ncountries.insert(-1, 'China') countries ['Taiwan', 'Janpan', 'America', 'China', 'Korea'] extend method list_1 = [object1, object2, object3, ...] list_2 = [object0] list_2.extend(list_1) countries_2 = ['Malaysia', 'Singapore'] countries.extend(countries_2) countries ['Taiwan', 'Janpan', 'America', 'China', 'Korea', 'Malaysia', 'Singapore'] 移除 List 裡的元素 remove method list.remove(object) countries.remove('China') countries ['Taiwan', 'Janpan', 'America', 'Korea', 'Malaysia', 'Singapore'] pop method list.pop(index) 如果括號內不指定index, 預設是最後一個元素(-1)\ncountries.pop() countries ['Taiwan', 'Janpan', 'America', 'Korea', 'Malaysia'] List 與 for-loop for item in list: print(item) for country in countries: print(country, end=', ') Taiwan, Janpan, America, Korea, Malaysia, 用 for-loop 來建立 List temp = [] for i in range(10): temp.append(i ** 2) temp [0, 1, 4, 9, 16, 25, 36, 49, 64, 81] pyhonic a = [x ** 2 for x in range(10)] a [0, 1, 4, 9, 16, 25, 36, 49, 64, 81] b = [1, 2, 3, 4, 5, 6, 7, 8, 9] c = [x ** 2 for x in b] c [1, 4, 9, 16, 25, 36, 49, 64, 81] ","id":32,"section":"posts","summary":"List 串列 List 用來儲存一連串有順序的資料，如： countries = ['Taiwan', 'Janpan', 'America'] print(countries) ['Taiwan', 'Janpan', 'America'] 取得 List 裡有幾個元素: len() length = len(countries) length [Out]: 3 取得List 裡的元素 list_name[index] countries[0] [Out]: 'Taiwan' 取得最後一個元素 list[-1] print(countries[-1])","tags":null,"title":"[Python] Ch1: Python Basics - 03 List","uri":"https://kaka-lin.github.io/my-blog/2020/06/03_list/","year":"2020"},{"content":"Dictionary 字典 在字典裡，皆由key(鍵)和value(值)組成\ndict = {key1 : value1, key2 : value2 } kaka = {'firstname':'lin', 'age': 28, 'height': 175} print(kaka) {'firstname': 'lin', 'age': 28, 'height': 175} 取得 Dictionary 裡有幾個元素: len() print(len(kaka)) [Out]: 3 取得 Dictionay 裡的資料 透過key來取得相對應的value\ndict[key] -\u0026gt; return value kaka['age'] [Out]: 28 取得 Dictionary 裡的所有 key dict.keys() kaka.keys() dict_keys(['firstname', 'age', 'height']) 取得 Dictionary 裡的所有 value dict.values() kaka.values() dict_values(['lin', 28, 175]) 取得 Dictionary 裡的所有資料 dict.items() kaka.items() dict_items([('firstname', 'lin'), ('age', 28), ('height', 175)]) 增加 Dictionary 裡的資料 dict[new_key] = value kaka['weight'] = 68 kaka {'firstname': 'lin', 'age': 28, 'height': 175, 'weight': 68} 更新 Dictionary 裡的資料 dict[key] = new_value kaka['weight'] = 70 kaka {'firstname': 'lin', 'age': 28, 'height': 175, 'weight': 70} 移除 Dictionary 裡的資料 del method del dict[key] del kaka['weight'] kaka {'firstname': 'lin', 'age': 28, 'height': 175} pop method dict.pop(key) kaka['weight'] = 70 kaka {'firstname': 'lin', 'age': 28, 'height': 175, 'weight': 70} kaka.pop('weight') kaka {'firstname': 'lin', 'age': 28, 'height': 175} 檢查指定的key是否存在於Dictionary中 key in dict -\u0026gt; return True 或是 False 'firstname' in kaka [Out]: True 'weight' in kaka [Out]: False Dictionary 與 for-loop for k, v in kaka.items(): print('{}: {}'.format(k, v)) firstname: lin age: 28 height: 175 用 for-loop 來建立 Dictionary temp = {} for i in range(10): temp[i] = i ** 2 temp {0: 0, 1: 1, 2: 4, 3: 9, 4: 16, 5: 25, 6: 36, 7: 49, 8: 64, 9: 81} pyhonic a = {x: x ** 2 for x in range(10)} a {0: 0, 1: 1, 2: 4, 3: 9, 4: 16, 5: 25, 6: 36, 7: 49, 8: 64, 9: 81} ","id":33,"section":"posts","summary":"Dictionary 字典 在字典裡，皆由key(鍵)和value(值)組成 dict = {key1 : value1, key2 : value2 } kaka = {'firstname':'lin', 'age': 28, 'height': 175} print(kaka) {'firstname': 'lin', 'age': 28, 'height': 175} 取得 Dictionary 裡有幾個元素: len() print(len(kaka)) [Out]: 3 取得 Dictionay 裡的資","tags":null,"title":"[Python] Ch1: Python Basics - 04 Dictionary","uri":"https://kaka-lin.github.io/my-blog/2020/06/04_dictionary/","year":"2020"},{"content":"Function 函式 def 函式名稱(參數): 程式碼 def printf(text): print(\u0026quot;[Out]: {}\u0026quot;.format(text)) printf('Hello world!') [Out]: Hello world! 閏年 根據維基百科，分辨平閏年的方法為：\n公元年份除以4不可整除，為平年。 公元年份除以4可整除但除以100不可整除，為閏年。 公元年份除以100可整除但除以400不可整除，為平年。 公元年份除以400可以整除為閏年 def check_leap_year(year): if (year % 400 == 0) or (year % 100 != 0 and year % 4 == 0): print(\u0026quot;閏年\u0026quot;) return 1 else: print(\u0026quot;平年\u0026quot;) return 0 year = int(input()) print(check_leap_year(1377)) 1344 平年 0 ","id":34,"section":"posts","summary":"Function 函式 def 函式名稱(參數): 程式碼 def printf(text): print(\u0026quot;[Out]: {}\u0026quot;.format(text)) printf('Hello world!') [Out]: Hello world! 閏年 根據維基百科，分辨平閏年的方法為： 公元年份除以4不可整除，為平年。 公元年份除以4可整除","tags":null,"title":"[Python] Ch1: Python Basics - 05 Function","uri":"https://kaka-lin.github.io/my-blog/2020/06/05_function/","year":"2020"},{"content":"Python Environment Setup Tutorials Medium: Install Python on Windows\nWindows macOS Ubuntu ","id":35,"section":"posts","summary":"Python Environment Setup Tutorials Medium: Install Python on Windows\nWindows macOS Ubuntu ","tags":["Python"],"title":"[Python] Ch0: Install Python","uri":"https://kaka-lin.github.io/my-blog/2020/05/readme/","year":"2020"},{"content":"1. Install Package Manager Homebrew\nIt is the package manager for macOS. Following the install step on the website to install it.\n2. Install Python3 2-1. Homebrew $ brew install python 2-2. Miniconda 1. Download installer $ wget https://repo.anaconda.com/miniconda/Miniconda3-latest-MacOSX-x86_64.sh 2. Install # install miniconda in ~/opt $ mkdir -p ~/opt $ chmod +x Miniconda3-latest-MacOSX-x86_64.sh $ bash Miniconda3-latest-MacOSX-x86_64.sh 3. Activate conda 1. bash Copy conda initialize in ~/.bash_profile to ~/.bashrc, as below: Activate $ source ~/.bashrc # or open new Terminal 2. zsh Copy conda initialize in ~/.bash_profile to ~/.zshrc, as below: Activate $ source ~/.zshrc # or open new Terminal ","id":36,"section":"posts","summary":"1. Install Package Manager Homebrew\nIt is the package manager for macOS. Following the install step on the website to install it.\n2. Install Python3 2-1. Homebrew $ brew install python 2-2. Miniconda 1. Download installer $ wget https://repo.anaconda.com/miniconda/Miniconda3-latest-MacOSX-x86_64.sh 2. Install # install miniconda in ~/opt $ mkdir -p ~/opt $ chmod +x Miniconda3-latest-MacOSX-x86_64.sh $ bash Miniconda3-latest-MacOSX-x86_64.sh 3. Activate conda 1. bash Copy conda initialize in ~/.bash_profile to ~/.bashrc, as below: Activate $ source ~/.","tags":null,"title":"[Python] Ch0: Install Python: Mac","uri":"https://kaka-lin.github.io/my-blog/2020/05/mac/","year":"2020"},{"content":"1. Install request package $ sudo apt-get update \u0026amp;\u0026amp; apt-get upgrade $ sudo apt-get install wget vim 2. Install Python3 Miniconda\n2-1. Download installer $ wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh 2-2. Change the access permissions of files $ chmod +x Miniconda3-latest-Linux-x86_64.sh 2-3. Install # install miniconda in ~/opt $ mkdir -p ~/opt $ bash Miniconda3-latest-Linux-x86_64.sh 2-4. Activate conda 1. bash Copy conda initialize in ~/.bash_profile to ~/.bashrc, as below: Activate $ source ~/.bashrc # or open new Terminal ","id":37,"section":"posts","summary":"1. Install request package $ sudo apt-get update \u0026amp;\u0026amp; apt-get upgrade $ sudo apt-get install wget vim 2. Install Python3 Miniconda\n2-1. Download installer $ wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh 2-2. Change the access permissions of files $ chmod +x Miniconda3-latest-Linux-x86_64.sh 2-3. Install # install miniconda in ~/opt $ mkdir -p ~/opt $ bash Miniconda3-latest-Linux-x86_64.sh 2-4. Activate conda 1. bash Copy conda initialize in ~/.bash_profile to ~/.bashrc, as below: Activate $ source ~/.bashrc # or open new Terminal ","tags":null,"title":"[Python] Ch0: Install Python: Ubuntu","uri":"https://kaka-lin.github.io/my-blog/2020/05/ubuntu/","year":"2020"},{"content":"1. Install Package Manager Chocolate\nIt is the package manager for windows. Following the install step on the website to install it.\n2. Install More Handy Terminal ConEmu\nUsing choco to install it.\n\u0026gt; choco install conemu 3. Install Git Bash Git for Window\nDownload and Install it.\n4. Open ConEmu Opening ConEmu and choose git bash, then you can use Unix-commands.\ngit bash\n5. Install Python3 Install Miniconda3\n$ choco install miniconda3 --params=\u0026quot;'/AddToPath:1'\u0026quot; then you can use conda and python\nIf you want to use python3.6\n$ conda install python=3.6 or create a new environment (Recommend)\n$ conda create --name py36 python=3.6 Activate the environment of py36\nNote: Because git bash use MinTTY that doesn\u0026rsquo;t support interactive operation, If you want to use python interactive shell, you can follow the method as follows\n$ python -i ","id":38,"section":"posts","summary":"1. Install Package Manager Chocolate\nIt is the package manager for windows. Following the install step on the website to install it.\n2. Install More Handy Terminal ConEmu\nUsing choco to install it.\n\u0026gt; choco install conemu 3. Install Git Bash Git for Window\nDownload and Install it.\n4. Open ConEmu Opening ConEmu and choose git bash, then you can use Unix-commands.\ngit bash\n5. Install Python3 Install Miniconda3\n$ choco install miniconda3 --params=\u0026quot;'/AddToPath:1'\u0026quot; then you can use conda and python","tags":null,"title":"[Python] Ch0: Install Python: Windows","uri":"https://kaka-lin.github.io/my-blog/2020/05/windows/","year":"2020"},{"content":"Install Common Packages After you installed python.\n$ pip install numpy scipy pandas matplotlib seaborn pillow scikit-learn mlxtend # or $ pip install -r requirements.txt ","id":39,"section":"posts","summary":"Install Common Packages After you installed python.\n$ pip install numpy scipy pandas matplotlib seaborn pillow scikit-learn mlxtend # or $ pip install -r requirements.txt ","tags":null,"title":"","uri":"https://kaka-lin.github.io/my-blog/1/01/common_packages/","year":"0001"}],"tags":[{"title":"Array","uri":"https://kaka-lin.github.io/my-blog/tags/array/"},{"title":"C++","uri":"https://kaka-lin.github.io/my-blog/tags/c++/"},{"title":"CI/CD Tools","uri":"https://kaka-lin.github.io/my-blog/tags/ci/cd-tools/"},{"title":"Concurrency","uri":"https://kaka-lin.github.io/my-blog/tags/concurrency/"},{"title":"Coroutine","uri":"https://kaka-lin.github.io/my-blog/tags/coroutine/"},{"title":"Generator","uri":"https://kaka-lin.github.io/my-blog/tags/generator/"},{"title":"Google Trends","uri":"https://kaka-lin.github.io/my-blog/tags/google-trends/"},{"title":"I/O Models","uri":"https://kaka-lin.github.io/my-blog/tags/i/o-models/"},{"title":"JupyterHub","uri":"https://kaka-lin.github.io/my-blog/tags/jupyterhub/"},{"title":"Matplotlib","uri":"https://kaka-lin.github.io/my-blog/tags/matplotlib/"},{"title":"Multi-Processing","uri":"https://kaka-lin.github.io/my-blog/tags/multi-processing/"},{"title":"Multi-Thread","uri":"https://kaka-lin.github.io/my-blog/tags/multi-thread/"},{"title":"MySQL","uri":"https://kaka-lin.github.io/my-blog/tags/mysql/"},{"title":"OOP","uri":"https://kaka-lin.github.io/my-blog/tags/oop/"},{"title":"Paint System","uri":"https://kaka-lin.github.io/my-blog/tags/paint-system/"},{"title":"Python","uri":"https://kaka-lin.github.io/my-blog/tags/python/"},{"title":"SQLAlchemy","uri":"https://kaka-lin.github.io/my-blog/tags/sqlalchemy/"},{"title":"SQLite","uri":"https://kaka-lin.github.io/my-blog/tags/sqlite/"}]}